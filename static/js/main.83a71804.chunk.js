(this["webpackJsonpreact-easy-diagram-example"]=this["webpackJsonpreact-easy-diagram-example"]||[]).push([[0],{17:function(e,t,a){e.exports=a(34)},24:function(e,t,a){},25:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),i=a.n(o),c=(a(24),a(1)),l=(a(25),a(2)),u=a(3),d=a(13),f=Object(u.b)({key:"nodesIds",default:[]}),s=Object(u.c)({key:"node",default:function(e){return{id:e,position:{x:0,y:0}}}}),m=Object(u.b)({key:"diagramTranslate",default:{x:0,y:0}}),p=Object(u.b)({key:"diagramScale",default:1}),b=r.a.memo((function(){return r.a.createElement("div",null)})),g=r.a.memo((function(e){var t=Object(u.e)(s(e.id)),a=Object(c.a)(t,2),n=a[0],o=a[1],i=Object(u.d)((function(e){var t=e.snapshot;return function(){var e=t.getLoadable(p).contents;return"number"===typeof e?e:1}}));return r.a.createElement(d.DraggableCore,{onStart:function(e){return e.stopPropagation()},onStop:function(e){return e.stopPropagation()},onDrag:function(e,t){e.stopPropagation();var a=i();o((function(e){return Object(l.a)(Object(l.a)({},e),{},{position:{x:e.position.x+t.deltaX/a,y:e.position.y-t.deltaY/a}})}))}},r.a.createElement("div",{style:{width:"100px",height:"100px",backgroundColor:"gray",position:"absolute",bottom:n.position.y,left:n.position.x}},e.id))})),v=r.a.memo((function(){var e=Object(u.e)(f),t=Object(c.a)(e,1)[0];return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(g,{key:e,id:e})})))})),y="_Diagram-module__react_fast_diagram_DiagramInner__HwoTi",E="_Diagram-module__react_fast_diagram_Movable__2c9oQ",h=Object(n.forwardRef)((function(e,t){var a=Object(u.e)(m),o=Object(c.a)(a,2),i=o[0],l=o[1],g=Object(u.e)(p),h=Object(c.a)(g,2),j=h[0],O=h[1],x=Object(n.useRef)(null),_=Object(u.d)((function(e){var t=e.set;return function(e){console.log(e),t(s(e.id),e),t(f,(function(t){return t.concat([e.id])}))}})),S=Object(u.d)((function(e){var t=e.set,a=e.reset,n=e.snapshot;return function(e){var r=n.getLoadable(f).contents;Array.isArray(r)&&r.forEach((function(e){return a(s(e))})),t(f,e.map((function(e){return e.id}))),e.forEach((function(e){return t(s(e.id),e)}))}}));Object(n.useImperativeHandle)(t,(function(){return{addNode:_,reinitState:S}}));var k=function(e,t){var a="scale(".concat(t,")");return"translate(".concat(e.x,"px, ").concat(e.y,"px)")+" "+a}(i,j);return r.a.createElement(d.DraggableCore,{onDrag:function(e,t){l((function(e){return{x:e.x+t.deltaX,y:e.y+t.deltaY}}))}},r.a.createElement("div",{ref:x,onWheel:function(e){var t=function(e,t,a,n){var r=null===e||void 0===e?void 0:e.getBoundingClientRect();if(!r)return null;var o=t.pageX-r.left,i=t.pageY-r.top,c=.9;t.deltaY<0&&(c=1/c);var l=(o-a.x)*(c-1),u=(i-a.y)*(c-1);return{scale:n*c,translate:{x:a.x-l,y:a.y-u}}}(x.current,e,i,j);t&&(l(t.translate),O(t.scale))},className:y},r.a.createElement("div",{className:E,style:{transform:k}},r.a.createElement(b,null),r.a.createElement(v,null))))}));h.displayName="InnerDiagram";var j=Object(n.forwardRef)((function(e,t){return r.a.createElement(u.a,{initializeState:function(t){return function(e,t){t.initialState&&(t.initialState.forEach((function(t){e.set(s(t.id),t)})),e.set(f,t.initialState.map((function(e){return e.id}))))}(t,e)}},r.a.createElement(h,{ref:t}))}));j.displayName="Diagram";a(33);var O={padding:"14px 16px"},x={float:"left",gap:"10px"},_=function(e,t){for(var a=[],n=0;n<e;n++)for(var r=0;r<t;r++)a.push({id:"node_".concat(n,"_").concat(r),position:{x:120*n,y:120*r}});return a},S=function(){var e=Object(n.useRef)(),t=Object(n.useState)(10),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(10),u=Object(c.a)(l,2),d=u[0],f=u[1];return Object(n.useEffect)((function(){var t;null===(t=e.current)||void 0===t||t.reinitState(_(o,d))}),[e,o,d]),r.a.createElement("div",{className:"App",style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column"}},r.a.createElement("ul",{style:{listStyleType:"none",margin:0,padding:0,overflow:"hidden",backgroundColor:"pink"}},r.a.createElement("li",{style:x},r.a.createElement("div",{style:O,onClick:function(){var t;return null===(t=e.current)||void 0===t?void 0:t.addNode({id:""+Math.floor(1e5*Math.random()),position:{x:Math.floor(300*Math.random()),y:Math.floor(300*Math.random())}})}},"Add rand node")),r.a.createElement("li",{style:x},r.a.createElement("div",{style:O},"Second")),r.a.createElement("li",{style:x},r.a.createElement("input",{type:"number",onChange:function(e){return i(parseInt(e.target.value))},value:o})),r.a.createElement("li",{style:x},r.a.createElement("input",{type:"number",onChange:function(e){return f(parseInt(e.target.value))},value:d}))),r.a.createElement("div",{style:{flexGrow:1,backgroundColor:"lightgray"}},r.a.createElement(j,{ref:e,initialState:_(o,d)})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.83a71804.chunk.js.map