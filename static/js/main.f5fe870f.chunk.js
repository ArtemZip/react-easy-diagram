(this["webpackJsonp@react-easy-diagram/demo"]=this["webpackJsonp@react-easy-diagram/demo"]||[]).push([[0],{58:function(t,e,n){},59:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var o=n(10),r=n(0),i=n.n(r),a=n(8),s=n.n(a),c=(n(58),n(59),n(101)),u=n(33),l=n(11),h=n(103),d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},f=function(t){var e=t.diagramOffset,n=t.digramZoom,o=t.settings;return o=null!==o&&void 0!==o?o:m,i.a.createElement("div",{className:"react_fast_diagram_Background_Default",style:{backgroundColor:o.color,backgroundImage:o.imageCreator(100*n,100*n),backgroundPosition:e[0]+"px "+e[1]+"px"}})},v=function(t,e){return"url(\"data:image/svg+xml,%3Csvg width='"+.3*t+"' height='"+.3*e+"' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2395bcbd' fill-opacity='0.3'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"},m={imageCreator:function(t,e){return"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+t+"' height='"+e+"' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.3'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"},color:"#ececec"},p=function(t){var e=d(d({},m),t||{});return{component:f,settings:e}},g=function(t){var e=Object(r.useState)(0),n=(e[0],e[1]),o=Object(r.useState)((function(){return{value:t,facade:{get current(){return o.value},set current(t){o.value!==t&&(o.value=t,n((function(t){return t+1})))}}}}))[0];return o.facade},b=Object(c.a)((function(t){var e=t.link,n=g(null),o=e.componentDefinition.component;e.path;return i.a.createElement("g",null,i.a.createElement(o,{draggableRef:n,path:e.path,entity:e,settings:e.componentDefinition.settings}))})),_=Object(c.a)((function(t){var e=t.linksStore;return i.a.createElement("svg",null,Object.values(e.links).map((function(t){return i.a.createElement(b,{key:t.id,link:t})})),e.linkCreation.link&&i.a.createElement(b,{key:e.linkCreation.link.id,link:e.linkCreation.link}))}));function y(t,e,n,o){return Object(r.useMemo)((function(){return{onDrag:function(o){var r=o.pinching,i=o.delta;if(t.current&&!r){var a=n?n():1;e.setOffset([e.offset[0]+i[0]/a,e.offset[1]+i[1]/a])}},onDragStart:function(e){var n=e.event;o&&o(n)||(t.current=!0)},onDragEnd:function(){return t.current=!1}}}),[t,e,n,o])}var j="react_fast_diagram_disabled_user_select";function k(t,e){Object(r.useEffect)((function(){if(t&&e&&!e.classList.contains(j))return e.classList.add(j),function(){e.classList.remove(j)}}),[t,e])}var O=Object(c.a)((function(t){var e=t.node,n=function(t,e){var n,o,i=ht().diagramState,a=g(!1),s=Object(r.useRef)(null),c=y(a,t,(function(){return i.zoom}),(function(t){return function(t,e){if("composedPath"in t)for(var n=t.composedPath(),o=0;o<n.length;o++){var r=n[o];if("classList"in r&&r.classList.contains(e))return!0}return!1}(t,"react_fast_diagram_PortWrapper")}));return Object(u.a)(c,{domTarget:s,eventOptions:{passive:!1},enabled:e}),k(a.current,null===(o=null===(n=s.current)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.body),{active:a.current,userInteractionElemRef:s}}(e).userInteractionElemRef;return i.a.createElement("div",{id:e.id,className:"react_fast_diagram_NodeWrapper",style:{left:e.offset[0],top:e.offset[1]},ref:e.ref},i.a.createElement(e.componentDefinition.component,{draggableRef:n,entity:e,settings:e.componentDefinition.settings}))})),z=Object(c.a)((function(t){var e=t.nodesStore;return i.a.createElement("div",null,Object.values(e.nodes).map((function(t){return i.a.createElement(O,{key:t.id,node:t})})))})),S=function(t,e){var n="translate("+t[0]+"px, "+t[1]+"px)";return e?n+" "+("scale("+e+")"):n},C=.1,x=function(t,e,n,o,r){r=function(t,e){return e*t<C?C/e:e*t>3?3/e:t}(r,o);var i=t.getBoundingClientRect(),a=e[0]-i.left,s=e[1]-i.top,c=(a-n[0])*(r-1),u=(s-n[1])*(r-1);return{scale:I(o*r,C,3),position:[n[0]-c,n[1]-u]}};var w=function(t){return[Math.round(t[0]),Math.round(t[1])]},E=function(t,e){return[t[0]+e[0],t[1]+e[1]]};function I(t,e,n){return Math.min(Math.max(t,e),n)}var P=function(t){var e,n,o=ht().diagramState,i=g(!1),a=Object(r.useRef)(null),s=Object(r.useCallback)((function(t){return t.target!==a.current}),[a]),c=y(i,o,void 0,s),l=function(t,e,n,o){var i=Object(r.useRef)({distance:0,origin:[0,0]});return Object(r.useMemo)((function(){return{onPinch:function(o){var r=o.da[0],a=o.origin;if(e.current&&t.current){var s,c,u=(s=a,c=i.current.origin,[s[0]-c[0],s[1]-c[1]]),l=r-i.current.distance,h=t.current.clientWidth*n.zoom,d=(h+l)/h,f=x(t.current,a,E(n.offset,u),n.zoom,d);i.current={distance:r,origin:a},n.setTransformation(f.position,f.scale)}},onPinchStart:function(t){var n=t.da[0],r=t.origin,a=t.event;o&&o(a)||(i.current={distance:n,origin:r},e.current=!0)},onPinchEnd:function(){return e.current=!1}}}),[t,e,n,o])}(a,i,o,s),h=function(t,e,n){return Object(r.useMemo)((function(){return{onWheel:function(e){var o=e.direction,r=(o[0],o[1]),i=e.event,a=i.clientX,s=i.clientY;if(t.current){var c=.9;r<0&&(c=1/c);var u=x(t.current,[a,s],n.offset,n.zoom,c);n.setTransformation(u.position,u.scale)}}}}),[t,e,n])}(a,i,o);return Object(u.a)(d(d(d({},c),l),h),{domTarget:a,eventOptions:{passive:!1},enabled:t}),k(i.current,null===(n=null===(e=a.current)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.body),{userInteractionElemRef:a,transform:o.transformString,active:i.current}},D=Object(c.a)((function(){var t=ht().diagramApi;return i.a.createElement("div",{className:"react_fast_diagram_Minicontrol_Default",style:{bottom:60}},i.a.createElement("div",{onClick:function(){return t.zoomIn()},className:"react_fast_diagram_Minicontrol_Default_Btn"},"+"),i.a.createElement("div",{onClick:function(){return t.zoomOut()},className:"react_fast_diagram_Minicontrol_Default_Btn"},"-"))})),T=Object(c.a)((function(t){var e=ht(),n=P(),o=n.transform,r=n.userInteractionElemRef;return i.a.createElement("div",{ref:r,style:d({},t.diagramStyles),className:"react_fast_diagram_DiagramInner"},i.a.createElement(dt,null),i.a.createElement(D,null),i.a.createElement("div",{className:"react_fast_diagram_DiagramInner_DraggablePart",style:{transform:o}},i.a.createElement(_,{linksStore:e.linksStore}),i.a.createElement(z,{nodesStore:e.nodesStore})))}));T.displayName="InnerDiagram";!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".react_fast_diagram_DiagramInner {\n  width: 100%;\n  height: 100%;\n  min-height: 100%;\n  position: relative;\n  overflow: hidden;\n  touch-action: none;\n}\n\n.react_fast_diagram_DiagramInner * {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.react_fast_diagram_DiagramInner_DraggablePart {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  overflow: visible;\n  transform-origin: 0px 0px;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  /* useGestures hook use targetTouches instead of simply touches, \n  so we should set this property to Movable, otherwise if user put \n  one finger above Movable and another above DiagramInner, the hook \n  will not trigger pinch gesture */\n  pointer-events: none; \n}\n\n.react_fast_diagram_DiagramInner_DraggablePart > * {\n  overflow: visible;\n}\n\n.react_fast_diagram_NodeWrapper {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content; \n  height: -webkit-fit-content; \n  height: -moz-fit-content; \n  height: fit-content;\n  pointer-events: auto; \n  -webkit-user-select: none; \n     -moz-user-select: none; \n      -ms-user-select: none; \n          user-select: none;\n}\n\n.react_fast_diagram_Node_Default {\n  min-width: 100px;\n  min-height: 100px;\n  background-color: white;\n  border: 2px solid WhiteSmoke;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  margin: auto;\n}\n\n.react_fast_diagram_PortContainer_Default {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.react_fast_diagram_PortContainer_Default_Horizontal > * {\n  margin: 0 5px;\n}\n\n.react_fast_diagram_PortContainer_Default_Vertical > * {\n  margin: 5px 0;\n}\n\n.react_fast_diagram_PortContainer_Default_Horizontal {\n  flex-direction: row;\n  width: 100%;\n}\n\n.react_fast_diagram_PortContainer_Default_Vertical {\n  flex-direction: column;\n  height: 100%;\n}\n\n.react_fast_diagram_Node_Default > * {\n  text-align: center;\n  margin: auto;\n}\n\n.react_fast_diagram_disabled_user_select {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.react_fast_diagram_Port_Default {\n  height: 25px;\n  width: 25px;\n  border-color: wheat;\n  background-color: #bbb;\n  border-radius: 50%;\n  display: inline-block;\n}\n\n.react_fast_diagram_BackgroundWrapper {\n  height: 100%;\n  width: 100%;\n  pointer-events: none;\n}\n\n.react_fast_diagram_Background_Default {\n  height: 100%;\n  width: 100%;\n}\n\n.react_fast_diagram_Minicontrol_Default {\n  position: relative;\n  left: 20px;\n  width: 24px;\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  display: flex;\n  flex-direction: column;\n}\n\n.react_fast_diagram_Minicontrol_Default_Btn {\n  width: 20px;\n  height: 20px;\n  background-color: white;\n  border: 1px solid rgb(209, 209, 209);\n  letter-spacing: normal;\n  display: inline-block;\n  text-align: center;\n  align-items: flex-start;\n  cursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  font-weight: bold;\n}\n\n.react_fast_diagram_Minicontrol_Default_Btn:hover {\n  background-color: rgb(228, 228, 228);\n  border: 1px solid rgb(209, 209, 209)\n}\n\n/* Containers with gap between items */\n\n.react_fast_diagram_flex_gap {\n  --gap: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.react_fast_diagram_flex_gap_y {\n  flex-direction: column;\n  height: 100%;\n}\n\n.react_fast_diagram_flex_gap_y > * {\n  margin: var(--gap) 0 0 0;\n}\n\n.react_fast_diagram_flex_gap_y > :first-child {\n  margin: 0;\n}\n\n.react_fast_diagram_flex_gap_x {\n  flex-direction: row;\n  width: 100%;\n}\n\n.react_fast_diagram_flex_gap_x > * {\n  margin: 0 0 0 var(--gap);\n}\n\n.react_fast_diagram_flex_gap_x > :first-child {\n  margin: 0;\n}\n\n/* Containers with gap between items */");var N=function(t){var e=this;this.addNode=function(t){e.rootStore.nodesStore.addNode(t)},this.reinitState=function(t,n){e.rootStore.nodesStore.fromJson(t),e.rootStore.linksStore.fromJson(n)},this.reinitSettings=function(t){t.diagram&&e.rootStore.diagramSettings.fromJson(t.diagram),t.nodes&&e.rootStore.nodesSettings.fromJson(t.nodes),t.links&&e.rootStore.linksSettings.fromJson(t.links),t.ports&&e.rootStore.portsSettings.fromJson(t.ports)},this.zoom=function(t){e.rootStore.diagramState.setZoom(e.rootStore.diagramState.zoom+t)},this.zoomIn=function(){return e.zoom(.2)},this.zoomOut=function(){return e.zoom(-.2)},this.recalculatePortPosition=function(){},this.rootStore=t},J=function(){function t(){this.backgroundComponent=p(),Object(l.c)(this)}return t.prototype.fromJson=function(t){t.backgroundComponent?this.backgroundComponent="component"in t.backgroundComponent?t.backgroundComponent:{component:t.backgroundComponent}:this.backgroundComponent=p()},t}(),R=function(){function t(t){var e=this;this.offset=[0,0],this.zoom=1,this.setOffset=function(t){e.offset=t},this.setTransformation=function(t,n){e.setOffset(t),e.setZoom(n)},this.setZoom=function(t){e.zoom=I(t,C,3)},Object(l.c)(this),this.rootStore=t}return Object.defineProperty(t.prototype,"transformString",{get:function(){return S(this.offset,this.zoom)},enumerable:!1,configurable:!0}),t}(),M=function(t){var e,n=null!==(e=t.settings)&&void 0!==e?e:V,o=t.path,r=o.svgPath,a=o.target;return i.a.createElement("g",null,i.a.createElement("path",{ref:t.draggableRef,d:r,stroke:n.color,strokeWidth:n.strokeWidth,fill:"none"}),t.entity.target.hasOnlyPosition&&i.a.createElement("circle",{cx:a[0],cy:a[1],r:n.cirleRadius,fill:"orange"}))},V={color:"LightBlue",strokeWidth:3,cirleRadius:3};function B(t){var e=d(d({},V),t||{});return{component:M,settings:e}}var H="default",L=function(){function t(t){var e=this;this.defaultType=H,this.fromJson=function(t,n){var o;void 0===n&&(n=!0),e.defaultType=null!==(o=t.defaultNodeType)&&void 0!==o?o:H,n?e.initDefaultComponents():e.components={},e.addComponentsFromJson(t.components)},this.getComponent=function(t){var n,o=null!==t&&void 0!==t?t:e.defaultType;return null!==(n=e.components[o])&&void 0!==n?n:e.components[e.defaultType]},this.defaultComponents=t,this.initDefaultComponents(),Object(l.c)(this)}return t.prototype.initDefaultComponents=function(){this.components={},this.addComponentsFromJson(this.defaultComponents)},t.prototype.addComponentsFromJson=function(t){var e=this;Object.entries(t).forEach((function(t){var n=t[0],o=t[1];e.components[n]="component"in o?{component:Object(c.a)(o.component),settings:o.settings}:{component:Object(c.a)(o)}}))},t}();function W(t,e,n,o,r){if(!t||!e)return"";t=w(t),e=w(e);var i,a,s=t[0]+", "+t[1],c=e[0]+", "+e[1],u=r.tweakDirectionFactorBasedOnDistance((i=t,a=e,Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2))),r.directionFactor);function l(t,e){switch(e&&r.portTypeToLinkDirectionMapping[e]){case"left":return t[0]-u+", "+t[1];case"up":return t[0]+", "+(t[1]-u);case"right":return t[0]+u+", "+t[1];case"down":return t[0]+", "+(t[1]+u);default:return t[0]+", "+t[1]}}return n||o?"M "+s+" C "+l(t,n)+" "+l(e,o)+", "+c:"M "+s+" Q "+e[0]+", "+t[1]+", "+c}var F={portTypeToLinkDirectionMapping:{left:"left",right:"right",top:"up",bottom:"down"},directionFactor:60,tweakDirectionFactorBasedOnDistance:function(t,e){return t<100?e*(t/100):e}};function A(t){return function(e,n,o,r){return W(e,n,o,r,t?d(d({},F),t):F)}}var Z=function(){var t,e=this;this.pathConstructor=A(),this.visualComponents=new L(((t={}).default=M,t)),this.fromJson=function(t){e.visualComponents.fromJson(t),e.pathConstructor=t.pathConstructor},Object(l.c)(this)},X=function(){function t(t){var e=this;this.position=null,this.nodeId=null,this.portId=null,this.fromJson=function(t){var n;"position"in t?(e.position=t.position,e.nodeId=null,e.portId=null):(e.position=null,e.nodeId=t.nodeId,e.portId=null!==(n=t.portId)&&void 0!==n?n:null)},Object(l.c)(this),this.rootStore=t}return Object.defineProperty(t.prototype,"port",{get:function(){if(this.nodeId&&this.portId){var t=this.rootStore.nodesStore.nodes[this.nodeId];if(null===t||void 0===t?void 0:t.ports)return t.ports[this.portId]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){var t;if(this.nodeId){var e=this.rootStore.nodesStore.nodes[this.nodeId];if(this.portId){var n=e.ports[this.portId];if(n&&n.offsetRelativeToNode&&n.realSize)return[e.offset[0]+n.offsetRelativeToNode[0]+n.realSize[0]/2,e.offset[1]+n.offsetRelativeToNode[1]+n.realSize[1]/2]}return e.realSize?[e.offset[0]+e.realSize[0]/2,e.offset[1]+e.realSize[1]/2]:e.offset}return null!==(t=this.position)&&void 0!==t?t:[0,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOnlyPosition",{get:function(){return!!this.position&&!this.nodeId},enumerable:!1,configurable:!0}),t}(),Y=function(){function t(t,e){var n=this;void 0===e&&(e=Object(h.a)()),this.componentType=H,this.segments=[],this.extra=null,this.fromJson=function(t){var e;n.componentType=null!==(e=t.componentType)&&void 0!==e?e:H,n.source.fromJson(t.source),n.target.fromJson(t.target),n.segments=t.segments,n.extra=t.extra},this.id=e,this.source=new X(t),this.target=new X(t),Object(l.c)(this),this.rootStore=t}return Object.defineProperty(t.prototype,"path",{get:function(){var t,e;return{svgPath:this.rootStore.linksSettings.pathConstructor(this.source.point,this.target.point,null===(t=this.source.port)||void 0===t?void 0:t.type,null===(e=this.target.port)||void 0===e?void 0:e.type),source:this.source.point,target:this.target.point}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentDefinition",{get:function(){return this.rootStore.linksSettings.visualComponents.getComponent(this.componentType)},enumerable:!1,configurable:!0}),t.prototype.setSource=function(t){this.source.fromJson(t)},t.prototype.setTarget=function(t){this.target.fromJson(t)},t}(),G=function(){function t(t){this.link=null,this.targetPortCandidate=null,Object(l.c)(this,{link:l.d,targetPortCandidate:l.d}),this.rootStore=t}return t.prototype.startLinking=function(t,e){this.link=new Y(this.rootStore),this.link.setSource({nodeId:t.nodeId,portId:t.id}),this.link.setTarget({position:t.offsetRelativeToNode&&t.node&&e?E(E(t.offsetRelativeToNode,t.node.offset),e):this.link.source.point})},t.prototype.setTargetPortCandidate=function(t){var e;(null===(e=this.link)||void 0===e?void 0:e.source)&&"portId"in this.link.source&&this.link.source.nodeId!==t.nodeId&&(this.targetPortCandidate=t)},t.prototype.resetTargetPortCandidateIfSame=function(t){this.targetPortCandidate===t&&(this.targetPortCandidate=null)},t.prototype.stopLinking=function(){this.targetPortCandidate&&this.link&&(this.link.setTarget({nodeId:this.targetPortCandidate.nodeId,portId:this.targetPortCandidate.id}),this.rootStore.linksStore.addLink(this.link)),this.targetPortCandidate=null,this.link=null},t}(),q=function(t){var e=this;this.links={},this.fromJson=function(t){e.links={},t&&t.forEach((function(t){var n=new Y(e.rootStore,t.id);n.fromJson(t),e.links[n.id]=n}))},this.addLinkFromJson=function(t){var n,o=null!==(n=t.id)&&void 0!==n?n:Object(h.a)();e.links[o]||(e.links[o]=new Y(e.rootStore,o)),e.links[o].fromJson(t)},this.addLink=function(t){e.links[t.id]=t},this.linkCreation=new G(t),Object(l.c)(this),this.rootStore=t};var Q=function(){function t(t){var e=this;this.offsetRelativeToParent=function(t){if(e.current){for(var n=e.current,o=0,r=0;t!==n&&n;)o+=n.offsetLeft,r+=n.offsetTop,n=n.parentElement;return[o,r]}return null},this.currentInternal=t,Object(l.c)(this)}return Object.defineProperty(t.prototype,"current",{get:function(){return this.currentInternal},set:function(t){this.currentInternal=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realSize",{get:function(){return this.current?[this.current.clientWidth,this.current.clientHeight]:null},enumerable:!1,configurable:!0}),t}(),K=function(){function t(t,e,n){var o=this;void 0===e&&(e=Object(h.a)()),void 0===n&&(n=Object(h.a)()),this.id="",this.nodeId="",this.label="",this.type="",this.fromJson=function(t){var e;o.type=null!==(e=t.type)&&void 0!==e?e:H,o.label=t.label},this.id=e,this.nodeId=n,this.ref=new Q(null),Object(l.c)(this),this.rootStore=t}return Object.defineProperty(t.prototype,"node",{get:function(){return this.rootStore.nodesStore.nodes[this.nodeId]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetRelativeToNode",{get:function(){var t;return(null===(t=this.node)||void 0===t?void 0:t.ref.current)?this.ref.offsetRelativeToParent(this.node.ref.current):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realSize",{get:function(){return this.ref.realSize},enumerable:!1,configurable:!0}),t}(),U=function(){function t(t,e){var n=this;void 0===e&&(e=Object(h.a)()),this.id="",this.offset=[0,0],this.ports={},this.componentType=H,this.extra=null,this.setOffset=function(t){n.offset=t},this.fromJson=function(t){var e;n.offset=t.position,n.componentType=null!==(e=t.componentType)&&void 0!==e?e:H,n.extra=t.extra,n.ports={},t.ports&&Object.keys(t.ports).length>0&&Object.entries(t.ports).forEach((function(t){var e=t[0],o=t[1],r=new K(n.rootStore,e,n.id);r.fromJson(o),n.ports[e]=r}))},this.id=e,this.ref=new Q(null),Object(l.c)(this),this.rootStore=t}return Object.defineProperty(t.prototype,"transformString",{get:function(){return S(this.offset)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentDefinition",{get:function(){return this.rootStore.nodesSettings.visualComponents.getComponent(this.componentType)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realSize",{get:function(){return this.ref.realSize},enumerable:!1,configurable:!0}),t}(),$=function(t){var e=this;this.nodes={},this.fromJson=function(t){e.nodes={},t&&t.forEach((function(t){var n=new U(e.rootStore,t.id);n.fromJson(t),e.nodes[n.id]=n}))},this.addNode=function(t){var n,o=null!==(n=t.id)&&void 0!==n?n:Object(h.a)();e.nodes[o]||(e.nodes[o]=new U(e.rootStore,o)),e.nodes[o].fromJson(t)},Object(l.c)(this),this.rootStore=t},tt=Object(c.a)((function(t){var e=t.port,n=function(t,e){var n,o,i=ht(),a=i.linksStore.linkCreation,s=i.diagramState,c=g(!1),l=Object(r.useRef)(null);return Object(u.a)({onDrag:function(t){var e=t.pinching,n=t.delta;if(c.current&&!e&&a.link){var o=s.zoom;a.link.setTarget({position:[a.link.target.point[0]+n[0]/o,a.link.target.point[1]+n[1]/o]})}},onDragStart:function(e){var n,o=e.event;o.target.releasePointerCapture(o.pointerId),c.current=!0,"offsetX"in o&&"offsetY"in o&&(n=[o.offsetX,o.offsetY]),a.startLinking(t,n)},onDragEnd:function(){c.current=!1,a.stopLinking()},onPointerEnter:function(){a.setTargetPortCandidate(t)},onPointerLeave:function(){a.resetTargetPortCandidateIfSame(t)}},{domTarget:l,eventOptions:{passive:!1},enabled:e}),k(c.current,null===(o=null===(n=l.current)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.body),{active:c.current,userInteractionElemRef:l}}(e).userInteractionElemRef;return i.a.createElement("div",{ref:{set current(t){n.current=t,e.ref.current=t}},id:e.nodeId+":"+e.id,className:"react_fast_diagram_PortWrapper"},i.a.createElement("div",{style:{width:10,height:10,backgroundColor:"#6eb7ff",border:"1px solid white"}}))})),et=function(t){var e=t.entity,n=t.settings,o=d(d({},ot),n),r="react_fast_diagram_flex_gap ";return"horizontal"===o.direction?r+="react_fast_diagram_flex_gap_x":r+="react_fast_diagram_flex_gap_y",i.a.createElement("div",{className:r,style:{"--gap":o.gapBetweenPorts}},Object.values(e).map((function(t){return i.a.createElement(tt,{key:t.id,port:t})})))};function nt(t){return{component:et,settings:d(d({},ot),t)}}var ot={direction:"horizontal",gapBetweenPorts:"8px"},rt=function(){var t=this;this.portsContainerVisualComponents=new L({horizontal:nt({direction:"horizontal"}),vertical:nt({direction:"vertical"})}),this.fromJson=function(e){e.portsContainerComponents&&t.portsContainerVisualComponents.fromJson(e.portsContainerComponents)},Object(l.c)(this)},it=function(t){var e=t.entity,n=t.settings,o=t.draggableRef,r=ht().portsSettings;return i.a.createElement("div",{ref:o,className:"react_fast_diagram_Node_Default",style:null===n||void 0===n?void 0:n.style},i.a.createElement("span",null,e.id),at(r,e.ports,"left","left"),at(r,e.ports,"top","top"),at(r,e.ports,"right","right"),at(r,e.ports,"bottom","bottom"))};function at(t,e,n,o){var r=Object.values(e).filter((function(t){return t.type===n})),a=t.portsContainerVisualComponents.getComponent("left"===o||"right"===o?"vertical":"horizontal");return r&&i.a.createElement("div",{style:{position:"absolute",left:"left"===o?0:void 0,top:"left"===o||"right"===o||"top"===o?0:void 0,right:"right"===o?0:void 0,bottom:"bottom"===o?0:void 0,height:"left"===o||"right"===o?"100%":void 0,width:"top"===o||"bottom"===o?"100%":void 0}},i.a.createElement(a.component,{entity:r,settings:a.settings}))}var st=function(){var t,e=this;this.visualComponents=new L(((t={}).default=it,t)),this.fromJson=function(t){e.visualComponents.fromJson(t)},Object(l.c)(this)},ct=function(){this.diagramState=new R(this),this.nodesStore=new $(this),this.linksStore=new q(this),this.diagramSettings=new J,this.nodesSettings=new st,this.linksSettings=new Z,this.portsSettings=new rt,this.diagramApi=new N(this)},ut=i.a.createContext(null),lt=function(t){var e=Object(r.useMemo)((function(){var e,n,o,r,i=new ct;return i.diagramApi.reinitState(null!==(n=null===(e=t.initState)||void 0===e?void 0:e.nodes)&&void 0!==n?n:[],null!==(r=null===(o=t.initState)||void 0===o?void 0:o.links)&&void 0!==r?r:[]),t.settings&&i.diagramApi.reinitSettings(t.settings),i}),[]);return Object(r.useEffect)((function(){t.apiRef&&(t.apiRef.current=e.diagramApi)}),[e,t.apiRef]),i.a.createElement(ut.Provider,{value:e},i.a.createElement(T,null))};lt.displayName="Diagram";var ht=function(){return Object(r.useContext)(ut)},dt=Object(c.a)((function(){var t=ht(),e=t.diagramSettings,n=t.diagramState;return i.a.createElement("div",{className:"react_fast_diagram_BackgroundWrapper"},i.a.createElement(e.backgroundComponent.component,{diagramOffset:n.offset,digramZoom:n.zoom,settings:e.backgroundComponent.settings}))})),ft=n(93),vt=n(100),mt=n(34),pt=n(104),gt=n(95),bt=n(102),_t=n(98),yt=n(99),jt=Object(ft.a)((function(){return{form:{display:"flex",flexDirection:"column",margin:"-8px 0","& > *":{margin:"8px 0"}},visibilityBtn:{borderRadius:"25px",minWidth:"24px",padding:"8px 8px",backgroundColor:"white"},header:{marginBottom:"15px",display:"flex",alignItems:"center",margin:"0 -14px","& > *":{margin:"0 14px"}}}})),kt=function(t){var e=jt(),n=Object(r.useState)(10),i=Object(mt.a)(n,2),a=i[0],s=i[1],c=Object(r.useState)(10),u=Object(mt.a)(c,2),l=u[0],h=u[1],d=Object(r.useState)(!1),f=Object(mt.a)(d,2),v=f[0],m=f[1];return v?Object(o.jsx)(vt.a,{padding:3,clone:!0,children:Object(o.jsxs)(gt.a,{children:[Object(o.jsxs)("div",{className:e.header,children:[Object(o.jsx)(bt.a,{className:e.visibilityBtn,variant:"outlined","aria-label":"control-panel",onClick:function(){return m(!1)},children:Object(o.jsx)(pt.a,{})}),Object(o.jsx)(_t.a,{variant:"h5",children:"Control Panel"})]}),Object(o.jsxs)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:function(e){if(e.preventDefault(),t.reinitState){var n=function(t,e){for(var n=[],o=[],r=function(t,e){return"node_".concat(t,"_").concat(e)},i=0;i<t;i++)for(var a=0;a<e;a++)n.push({id:r(i,a),position:[120*i,120*a],ports:{left:{type:"left"},top:{type:"top"},right:{type:"right"},bottom:{type:"bottom"}}}),i-1>=0&&o.push({source:{nodeId:r(i-1,a),portId:"right"},target:{nodeId:r(i,a),portId:"left"}}),a-1>=0&&o.push({source:{nodeId:r(i,a-1),portId:"bottom"},target:{nodeId:r(i,a),portId:"top"}});return{nodes:n,links:o}}(a,l);t.reinitState(n.nodes,n.links)}},children:[Object(o.jsx)(yt.a,{id:"rows",value:a,type:"number",label:"Rows",variant:"outlined",onChange:function(t){return s(parseInt(t.target.value))}}),Object(o.jsx)(yt.a,{id:"columns",value:l,type:"number",label:"Columns",variant:"outlined",onChange:function(t){return h(parseInt(t.target.value))}}),Object(o.jsx)(bt.a,{variant:"contained",type:"submit",children:"Generate new Diagram"})]})]})}):Object(o.jsx)(bt.a,{variant:"outlined",className:e.visibilityBtn,"aria-label":"control-panel",onClick:function(){return m(!0)},children:Object(o.jsx)(pt.a,{})})},Ot=Object(ft.a)((function(){return{diagram:{height:"100vh",width:"100vw"},controlPanel:{position:"absolute",top:"20px",left:"20px"}}})),zt=function(){var t,e=Ot(),n=function(t,e){var n=g(null);return Object(r.useMemo)((function(){return{Diagram:function(){return i.a.createElement(lt,{apiRef:n,initState:t,settings:e})},apiRef:n}}),[])}(St,{links:{components:{default:B(),attention:B({color:"red"})},pathConstructor:A()},diagram:{backgroundComponent:p({color:"#f0f0f0",imageCreator:v})}}),a=n.Diagram,s=n.apiRef;return Object(o.jsxs)(vt.a,{className:e.diagram,children:[Object(o.jsx)(a,{}),Object(o.jsx)(vt.a,{className:e.controlPanel,children:Object(o.jsx)(kt,{reinitState:null===(t=s.current)||void 0===t?void 0:t.reinitState})})]})},St={nodes:[{id:"Node 1",position:[300,300],ports:{output_1:{type:"bottom"}}},{id:"Node 2",position:[520,400],ports:{input_1:{type:"top"},input_2:{type:"top"},output_1:{type:"right"},output_2:{type:"right"},output_3:{type:"right"}}},{id:"Node 3",position:[520,200],ports:{input_1:{type:"top"},output_1:{type:"bottom"},output_2:{type:"bottom"}}}],links:[{source:{nodeId:"Node 2"},target:{nodeId:"Node 1"},componentType:"attention"}]};s.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(zt,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.f5fe870f.chunk.js.map