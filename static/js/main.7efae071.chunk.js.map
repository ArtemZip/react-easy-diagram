{"version":3,"sources":["../../../src/states/common.ts","../../../src/states/linkState.ts","../../../src/components/LinkDefault.tsx","../../src/utils.ts","../../../src/linkConstructors/common.ts","../../../src/linkConstructors/curved.ts","../../../src/states/linksSettingsState.ts","../../../src/components/NodeDefault.tsx","../../../src/states/nodesSettingsState.ts","../../../src/states/nodeState.ts","../../../src/hooks/nodeHooks.tsx","../../../src/hooks/linkHooks.ts","../../../src/hooks/useNotifyRef.ts","../../../src/components/LinkWrapper.tsx","../../../src/components/LinksLayer.tsx","../../../src/states/diagramState.ts","../../../../src/hooks/userInteractions/common.ts","../../../../src/hooks/userInteractions/useDragHandlers.ts","../../../../src/hooks/userInteractions/useNodeUserInteraction.ts","../../../src/components/NodeWrapper.tsx","../../../src/components/NodesLayer.tsx","../../../src/states/initializers.ts","../../../../src/hooks/userInteractions/useDiagramUserInteraction.ts","../../../../src/hooks/userInteractions/usePinchHandlers.ts","../../../../src/hooks/userInteractions/useWheelHandler.ts","../../../src/components/DiagramInner.tsx","../../../src/components/Diagram.tsx","ControlPanel.tsx","App.tsx","../../../src/hooks/useDiagram.tsx","index.tsx"],"names":["key","snap","current","addNode","setState","reinitState","useStyles","makeStyles","form","display","flexDirection","gap","visibilityBtn","borderRadius","minWidth","padding","backgroundColor","header","marginBottom","alignItems","ControlPanel","props","classes","useState","row","setRow","col","setCol","visible","setVisible","Box","clone","Card","className","Button","variant","aria-label","onClick","Tune","Typography","noValidate","autoComplete","onSubmit","e","colNum","rowNum","nodes","links","getNodeId","i","j","push","id","position","x","y","source","nodeId","target","generateLargeDiagram","preventDefault","stopPropagation","TextField","value","type","label","onChange","parseInt","diagram","height","width","backgroundImage","controlPanel","top","left","App","useDiagram","linkComponents","default","createLinkDefault","attention","color","pathConstructor","createCurvedLinkPathConstructor","initState","Diagram","apiRef","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7efae071.chunk.js","sourcesContent":["export var libraryPrefix = 'reactEasyDiagram';\r\n//# sourceMappingURL=common.js.map","import { atom, atomFamily } from 'recoil';\r\nimport { libraryPrefix } from './common';\r\nexport var linksIdsState = atom({\r\n    key: libraryPrefix + \"_LinksIds\",\r\n    default: [],\r\n});\r\nexport var linkWithIdState = atomFamily({\r\n    key: libraryPrefix + \"_Link\",\r\n    default: function (id) { return ({ id: id, type: defaultLinkType }); },\r\n});\r\nexport var defaultLinkType = 'default';\r\n//# sourceMappingURL=linkState.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { forwardRef } from 'react';\r\nexport var LinkDefault = forwardRef(function (props, ref) {\r\n    var settings = __assign({ color: 'LightBlue', strokeWidth: 3 }, (props.settings ? props.settings : {}));\r\n    return (React.createElement(\"path\", { ref: ref, d: props.path, stroke: settings.color, strokeWidth: settings.strokeWidth, fill: 'none' }));\r\n});\r\nexport function createLinkDefault(settings) {\r\n    return {\r\n        component: LinkDefault,\r\n        settings: settings,\r\n    };\r\n}\r\n// <g>\r\n//       {/* Main line */}\r\n//       <path d={points} stroke={linkColor} strokeWidth=\"3\" fill=\"none\" />\r\n//       {/* Thick line to make selection easier */}\r\n//       <path\r\n//         d={points}\r\n//         stroke={linkColor}\r\n//         strokeWidth=\"20\"\r\n//         fill=\"none\"\r\n//         strokeLinecap=\"round\"\r\n//         strokeOpacity={isHovered || isSelected ? 0.1 : 0}\r\n//         onMouseEnter={() => onLinkMouseEnter({ config, linkId: link.id })}\r\n//         onMouseLeave={() => onLinkMouseLeave({ config, linkId: link.id })}\r\n//         onClick={(e) => {\r\n//           onLinkClick({ config, linkId: link.id })\r\n//           e.stopPropagation()\r\n//         }}\r\n//       />\r\n//     </g>\r\n//# sourceMappingURL=LinkDefault.js.map","export var generateTransform = function (translate, scale) {\r\n    var translatePart = \"translate(\" + translate.x + \"px, \" + translate.y + \"px)\";\r\n    if (scale) {\r\n        var scalePart = \"scale(\" + scale + \")\";\r\n        return translatePart + ' ' + scalePart;\r\n    }\r\n    else {\r\n        return translatePart;\r\n    }\r\n};\r\nvar MIN_SCALE = 0.1;\r\nvar MAX_SCALE = 2;\r\n// See: https://stackoverflow.com/a/30039971/9142642\r\nexport var computeTransformationOnScale = function (target, midpoint, translate, scale, factor) {\r\n    factor = clampFactorForTransformation(factor, scale);\r\n    // The upper left corner of the target stays in the same place while the picture is enlarged\r\n    var rect = target.getBoundingClientRect();\r\n    // Get mouse position related to target\r\n    var mouseXPos = midpoint.x - rect.left;\r\n    var mouseYPos = midpoint.y - rect.top;\r\n    // Now consider the point under the mouse cursor. Every pixel above and to the\r\n    // left of the cursor has become *factor* larger. This displaces the point under the\r\n    // cursor by *factor* downward and to the right. Meanwhile, the cursor is in the same position.\r\n    // Note that the target might have been moved in the canvas before the zooming operation, so the\r\n    // cursor's horizontal position in the target is mouseXPos - transformation.translation.x before zooming,\r\n    // and likewise for the vertical position.\r\n    var dx = (mouseXPos - translate.x) * (factor - 1);\r\n    var dy = (mouseYPos - translate.y) * (factor - 1);\r\n    return {\r\n        scale: clampValue(scale * factor, MIN_SCALE, MAX_SCALE),\r\n        position: {\r\n            // Compensate for the displacement by moving the point back under the cursor\r\n            x: translate.x - dx,\r\n            y: translate.y - dy,\r\n        },\r\n    };\r\n};\r\nfunction clampFactorForTransformation(factor, currentScale) {\r\n    if (currentScale * factor < MIN_SCALE) {\r\n        return MIN_SCALE / currentScale;\r\n    }\r\n    else if (currentScale * factor > MAX_SCALE) {\r\n        return MAX_SCALE / currentScale;\r\n    }\r\n    else\r\n        return factor;\r\n}\r\nexport var roundPoint = function (point) { return ({\r\n    x: Math.round(point.x),\r\n    y: Math.round(point.y),\r\n}); };\r\nexport var addPoints = function (a, b) { return ({\r\n    x: a.x + b.x,\r\n    y: a.y + b.y,\r\n}); };\r\nexport var subtractPoints = function (a, b) { return ({\r\n    x: a.x - b.x,\r\n    y: a.y - b.y,\r\n}); };\r\nexport var multiplyPoint = function (a, m) { return ({\r\n    x: a.x * m,\r\n    y: a.y * m,\r\n}); };\r\nexport var arePointsEqual = function (a, b) {\r\n    return a === b || (a && b && a.x === b.x && a.y === b.y);\r\n};\r\nexport var areTranformationsEqual = function (a, b) {\r\n    return a === b ||\r\n        (a && b && a.scale === b.scale && arePointsEqual(a.position, b.position));\r\n};\r\nexport function clampValue(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n//# sourceMappingURL=utils.js.map","export function getEndpointPoint(endpoint) {\r\n    if ('node' in endpoint) {\r\n        return getEndpointPointForNode(endpoint);\r\n    }\r\n    else {\r\n        return endpoint.position;\r\n    }\r\n}\r\nexport function getEndpointPointForNode(endpoint) {\r\n    var _a, _b;\r\n    var htmlElem = (_b = (_a = endpoint.node) === null || _a === void 0 ? void 0 : _a.ref) === null || _b === void 0 ? void 0 : _b.current;\r\n    if (htmlElem) {\r\n        return {\r\n            x: endpoint.node.position.x +\r\n                (htmlElem.clientWidth ? htmlElem.clientWidth / 2 : 0),\r\n            y: endpoint.node.position.y +\r\n                (htmlElem.clientHeight ? htmlElem.clientHeight / 2 : 0),\r\n        };\r\n    }\r\n    else {\r\n        return endpoint.node.position;\r\n    }\r\n}\r\n//# sourceMappingURL=common.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { roundPoint } from '../utils';\r\nimport { getEndpointPoint } from './common';\r\nfunction curvedLinkPathConstructorInner(state, settings) {\r\n    var fromPoint = getEndpointPoint(state.source);\r\n    var toPoint = getEndpointPoint(state.target);\r\n    var path = generateCurvePath(fromPoint, toPoint);\r\n    return path;\r\n}\r\nvar defualtSettings = {};\r\nexport function createCurvedLinkPathConstructor(settings) {\r\n    return function (state) {\r\n        return curvedLinkPathConstructorInner(state, settings ? __assign(__assign({}, defualtSettings), settings) : defualtSettings);\r\n    };\r\n}\r\nvar CURVE_FACTOR = 60;\r\n/**\r\n * Calculates the offset accordingly to the alignment\r\n */\r\n// const getXOffset = (alignment) => {\r\n//   if (!alignment || (alignment !== 'left' && alignment !== 'right')) return 0;\r\n//   return alignment === 'left' ? -CURVE_FACTOR : CURVE_FACTOR;\r\n// };\r\n// const getYOffset = (alignment) => {\r\n//   if (!alignment || (alignment !== 'top' && alignment !== 'bottom')) return 0;\r\n//   return alignment === 'top' ? CURVE_FACTOR : -CURVE_FACTOR;\r\n// };\r\n/**\r\n * Given a source point and an output point produces the SVG path between them\r\n */\r\nvar generateCurvePath = function (startPoint, endPoint) {\r\n    if (!startPoint || !endPoint)\r\n        return '';\r\n    var roundedStart = roundPoint(startPoint);\r\n    var roundedEnd = roundPoint(endPoint);\r\n    var start = roundedStart.x + \", \" + roundedStart.y;\r\n    var end = roundedEnd.x + \", \" + roundedEnd.y;\r\n    // if (options.type === 'bezier' && (options.inputAlignment || options.outputAlignment)) {\r\n    //   let startControl = end;\r\n    //   let endControl = start;\r\n    //   if (options.inputAlignment) {\r\n    //     const offsetX = roundedStart.x + getXOffset(options.inputAlignment);\r\n    //     const offsetY = roundedStart.y + getYOffset(options.inputAlignment);\r\n    //     endControl = `${offsetX}, ${offsetY}`;\r\n    //   }\r\n    //   if (options.outputAlignment) {\r\n    //     const offsetX = roundedEnd.x + getXOffset(options.outputAlignment);\r\n    //     const offsetY = roundedEnd.y + getYOffset(options.outputAlignment);\r\n    //     startControl = `${offsetX}, ${offsetY}`;\r\n    //   }\r\n    //   return `M ${start} C ${endControl} ${startControl}, ${end}`;\r\n    // }\r\n    // connecting with a standard curve without any alignment\r\n    var ctrl = roundedEnd.x + \", \" + roundedStart.y;\r\n    return \"M \" + start + \" Q \" + ctrl + \", \" + end;\r\n};\r\n//# sourceMappingURL=curved.js.map","import { atom, selector, selectorFamily } from 'recoil';\r\nimport { LinkDefault } from '../components/LinkDefault';\r\nimport { createCurvedLinkPathConstructor } from '../linkConstructors/curved';\r\nimport { libraryPrefix } from './common';\r\nimport { defaultLinkType } from './linkState';\r\nexport var linksSettingsState = atom({\r\n    key: libraryPrefix + \"_LinksSettings\",\r\n    default: {\r\n        defaultLinkType: defaultLinkType,\r\n        linkComponents: {\r\n            default: LinkDefault,\r\n        },\r\n        pathConstructor: createCurvedLinkPathConstructor(),\r\n    },\r\n});\r\nexport var linkComponentDefinitionState = selectorFamily({\r\n    key: libraryPrefix + \"_LinkComponentDefinition\",\r\n    get: function (componentType) { return function (_a) {\r\n        var get = _a.get;\r\n        var settings = get(linksSettingsState);\r\n        componentType = componentType !== null && componentType !== void 0 ? componentType : defaultLinkType;\r\n        var componentDefinition = componentType in settings.linkComponents\r\n            ? settings.linkComponents[componentType]\r\n            : settings.linkComponents[defaultLinkType];\r\n        return 'component' in componentDefinition\r\n            ? componentDefinition\r\n            : {\r\n                component: componentDefinition,\r\n            };\r\n    }; },\r\n});\r\nexport var linkPathConstructorState = selector({\r\n    key: libraryPrefix + \"_LinkPathContructor\",\r\n    get: function (_a) {\r\n        var get = _a.get;\r\n        var settings = get(linksSettingsState);\r\n        return settings.pathConstructor;\r\n    },\r\n});\r\n//# sourceMappingURL=linksSettingsState.js.map","import React, { forwardRef } from 'react';\r\nexport var NodeDefault = forwardRef(function (props, draggableRef) {\r\n    var _a;\r\n    return (React.createElement(\"div\", { ref: draggableRef, className: 'react_fast_diagram_Node_Default', style: (_a = props.settings) === null || _a === void 0 ? void 0 : _a.style },\r\n        React.createElement(\"span\", null, props.node.id)));\r\n});\r\nexport function createNodeDefault(settings) {\r\n    return {\r\n        component: NodeDefault,\r\n        settings: settings,\r\n    };\r\n}\r\n//# sourceMappingURL=NodeDefault.js.map","import { atom, selectorFamily } from 'recoil';\r\nimport { defaultNodeType } from '..';\r\nimport { NodeDefault } from '../components/NodeDefault';\r\nimport { libraryPrefix } from './common';\r\nexport var nodesSettingsState = atom({\r\n    key: libraryPrefix + \"_NodesSettings\",\r\n    default: {\r\n        defaultNodeType: defaultNodeType,\r\n        nodeComponents: {\r\n            default: NodeDefault,\r\n        },\r\n    },\r\n});\r\nexport var nodeComponentDefinitionState = selectorFamily({\r\n    key: libraryPrefix + \"_NodeComponentDefinition\",\r\n    get: function (componentType) { return function (_a) {\r\n        var get = _a.get;\r\n        var settings = get(nodesSettingsState);\r\n        componentType = componentType !== null && componentType !== void 0 ? componentType : defaultNodeType;\r\n        var componentDefinition = componentType in settings.nodeComponents\r\n            ? settings.nodeComponents[componentType]\r\n            : settings.nodeComponents[defaultNodeType];\r\n        return 'component' in componentDefinition\r\n            ? componentDefinition\r\n            : {\r\n                component: componentDefinition,\r\n            };\r\n    }; },\r\n});\r\n//# sourceMappingURL=nodesSettingsState.js.map","import { atom, atomFamily } from 'recoil';\r\nimport { libraryPrefix } from './common';\r\nexport var nodesIdsState = atom({\r\n    key: libraryPrefix + \"_NodesIds\",\r\n    default: [],\r\n});\r\nexport var defaultNodeType = 'default';\r\nexport var nodeWithIdState = atomFamily({\r\n    key: libraryPrefix + \"_Node\",\r\n    default: function (id) { return ({\r\n        id: id,\r\n        position: { x: 0, y: 0 },\r\n        type: defaultNodeType,\r\n    }); },\r\n});\r\n//# sourceMappingURL=nodeState.js.map","import { useRecoilState } from 'recoil';\r\nimport { nodesSettingsState, } from '../states/nodesSettingsState';\r\nimport { nodeWithIdState } from '../states/nodeState';\r\nexport var useNodeState = function (id) { return useRecoilState(nodeWithIdState(id)); };\r\nexport var useNodesSettings = function () { return useRecoilState(nodesSettingsState); };\r\n// export const useNodeComponent = (\r\n//   type?: string\r\n// ): ((propsWithRef: INodePropsWithRef) => JSX.Element) => {\r\n//   const nodeComponentDefinition = useRecoilValue(\r\n//     nodeComponentDefinitionState(type ?? defaultNodeType)\r\n//   );\r\n//   if ('component' in nodeComponentDefinition) {\r\n//     const NodeComponent = nodeComponentDefinition.component;\r\n//     return {nodeComponentDefinition.component\r\n//   } else {\r\n//     const NodeComponent = nodeComponentDefinition;\r\n//     return (props) => <NodeComponent {...props} />;\r\n//   }\r\n// };\r\n//# sourceMappingURL=nodeHooks.js.map","import { useRecoilState } from 'recoil';\r\nimport { linksSettingsState } from '../states/linksSettingsState';\r\nimport { linkWithIdState, } from '../states/linkState';\r\nimport { useNodeState } from './nodeHooks';\r\nexport var useLinksSettings = function () { return useRecoilState(linksSettingsState); };\r\nexport var useLinkState = function (id) { return useRecoilState(linkWithIdState(id)); };\r\n// Use recoil selector instead\r\nexport var useLinkStateExtended = function (id) {\r\n    var _a = useLinkState(id), link = _a[0], setLink = _a[1];\r\n    var sourceNode = useNodeState(getNodeIdForLinkEndpoint(link.source))[0];\r\n    var targetNode = useNodeState(getNodeIdForLinkEndpoint(link.target))[0];\r\n    return [\r\n        {\r\n            link: link,\r\n            source: {\r\n                node: sourceNode,\r\n            },\r\n            target: {\r\n                node: targetNode,\r\n            },\r\n        },\r\n        setLink,\r\n    ];\r\n};\r\nvar getNodeIdForLinkEndpoint = function (target) {\r\n    if (!target) {\r\n        return '';\r\n    }\r\n    if ('nodeId' in target) {\r\n        return target.nodeId;\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n};\r\n//# sourceMappingURL=linkHooks.js.map","import { useState } from \"react\";\r\nexport var useNotifyRef = function (init) {\r\n    var _a = useState(0), _ = _a[0], forceUpdate = _a[1];\r\n    var ref = useState(function () { return ({\r\n        value: init,\r\n        facade: {\r\n            get current() {\r\n                return ref.value;\r\n            },\r\n            set current(value) {\r\n                var last = ref.value;\r\n                if (last !== value) {\r\n                    ref.value = value;\r\n                    forceUpdate(function (i) { return i + 1; });\r\n                }\r\n            },\r\n        },\r\n    }); })[0];\r\n    return ref.facade;\r\n};\r\n//# sourceMappingURL=useNotifyRef.js.map","import React from 'react';\r\nimport { useRecoilValue } from 'recoil';\r\nimport { useLinkStateExtended } from '../hooks/linkHooks';\r\nimport { useNotifyRef } from '../hooks/useNotifyRef';\r\nimport { linkComponentDefinitionState, linkPathConstructorState, } from '../states/linksSettingsState';\r\nexport var LinkWrapper = function (_a) {\r\n    var id = _a.id;\r\n    var linkStateExtended = useLinkStateExtended(id)[0];\r\n    var pathConstructor = useRecoilValue(linkPathConstructorState);\r\n    var path = pathConstructor(linkStateExtended);\r\n    var linkComponentDefinition = useRecoilValue(linkComponentDefinitionState(linkStateExtended.link.type));\r\n    var linkRef = useNotifyRef(null);\r\n    return (React.createElement(\"g\", null,\r\n        React.createElement(linkComponentDefinition.component, { ref: linkRef, path: path, settings: linkComponentDefinition.settings })));\r\n};\r\nexport var LinkWrapperMemo = React.memo(LinkWrapper);\r\n//# sourceMappingURL=LinkWrapper.js.map","import React from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport { linksIdsState } from '../states/linkState';\r\nimport { LinkWrapperMemo } from './LinkWrapper';\r\nvar LinksLayer = function () {\r\n    var links = useRecoilState(linksIdsState)[0];\r\n    return (React.createElement(\"svg\", null, links.map(function (id) { return (React.createElement(LinkWrapperMemo, { key: id, id: id })); })));\r\n};\r\nexport var LinksLayerMemorized = React.memo(LinksLayer);\r\n//# sourceMappingURL=LinksLayer.js.map","import { atom, DefaultValue, selector } from 'recoil';\r\nimport { libraryPrefix } from './common';\r\nexport var diagramTranslateState = atom({\r\n    key: libraryPrefix + \"_DiagramTranslate\",\r\n    default: {\r\n        x: 0,\r\n        y: 0,\r\n    },\r\n});\r\nexport var diagramScaleState = atom({\r\n    key: libraryPrefix + \"_DiagramScale\",\r\n    default: 1,\r\n});\r\nexport var diagramTransformationState = selector({\r\n    key: libraryPrefix + \"_DiagramTransformation\",\r\n    get: function (_a) {\r\n        var get = _a.get;\r\n        var scale = get(diagramScaleState);\r\n        var translate = get(diagramTranslateState);\r\n        return { scale: scale, position: translate };\r\n    },\r\n    set: function (_a, newValue) {\r\n        var set = _a.set;\r\n        if (newValue instanceof DefaultValue) {\r\n        }\r\n        else {\r\n            set(diagramScaleState, newValue.scale);\r\n            set(diagramTranslateState, newValue.position);\r\n        }\r\n    },\r\n});\r\nexport var commonSettingsState = atom({\r\n    key: libraryPrefix + \"_CommonSettings\",\r\n    default: {\r\n        readonly: false,\r\n    },\r\n});\r\n//# sourceMappingURL=diagramState.js.map","import { useEffect } from 'react';\r\nimport { arePointsEqual, } from '../../utils';\r\n// Update internal position if element position was changed programmatically\r\nexport function usePositionSync(active, positionStateRef, externalPosition, setExternalPosition) {\r\n    useEffect(function () {\r\n        if (!active) {\r\n            if (!arePointsEqual(positionStateRef.current, externalPosition)) {\r\n                positionStateRef.current = externalPosition;\r\n            }\r\n        }\r\n        else {\r\n            setExternalPosition(function (currentPosition) {\r\n                if (!arePointsEqual(positionStateRef.current, currentPosition)) {\r\n                    return positionStateRef.current;\r\n                }\r\n                else {\r\n                    return currentPosition;\r\n                }\r\n            });\r\n        }\r\n    }, [active, positionStateRef, positionStateRef.current, externalPosition, setExternalPosition]);\r\n}\r\nexport function allTouchTargetsContainsClass(event, listenOnlyClass, ignoreClass) {\r\n    for (var i = 0; i < event.touches.length; i++) {\r\n        if (!eventTargetContainsClass(event.touches[i].target, listenOnlyClass, ignoreClass)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function eventTargetContainsClass(eventTarget, listenOnlyClass, ignoreClass) {\r\n    if (eventTarget && 'classList' in eventTarget) {\r\n        var targetElement = eventTarget;\r\n        return ((!listenOnlyClass || targetElement.classList.contains(listenOnlyClass)) &&\r\n            (!ignoreClass || !targetElement.classList.contains(ignoreClass)));\r\n    }\r\n    else\r\n        return false;\r\n}\r\nexport var DISABLED_USER_SELECT_CSS_CLASS = 'react_fast_diagram_disabled_user_select';\r\nexport function useUserAbilityToSelectSwitcher(active, elementToSwitchUserSelectOn) {\r\n    useEffect(function () {\r\n        if (!active || !elementToSwitchUserSelectOn) {\r\n            return;\r\n        }\r\n        if (elementToSwitchUserSelectOn.classList.contains(DISABLED_USER_SELECT_CSS_CLASS)) {\r\n            return;\r\n        }\r\n        elementToSwitchUserSelectOn.classList.add(DISABLED_USER_SELECT_CSS_CLASS);\r\n        return function () {\r\n            elementToSwitchUserSelectOn.classList.remove(DISABLED_USER_SELECT_CSS_CLASS);\r\n        };\r\n    }, [active, elementToSwitchUserSelectOn]);\r\n}\r\n//# sourceMappingURL=common.js.map","import { useMemo } from 'react';\r\nexport function useDragHandlers(activeRef, stateRef, parentScaleGetter, cancel) {\r\n    var handlers = useMemo(function () { return ({\r\n        onDrag: function (_a) {\r\n            var pinching = _a.pinching, delta = _a.delta;\r\n            if (!activeRef.current || pinching) {\r\n                return;\r\n            }\r\n            var parentScale = parentScaleGetter ? parentScaleGetter() : 1;\r\n            if ('scale' in stateRef.current) {\r\n                stateRef.current = {\r\n                    scale: stateRef.current.scale,\r\n                    position: {\r\n                        x: stateRef.current.position.x + delta[0] / parentScale,\r\n                        y: stateRef.current.position.y + delta[1] / parentScale,\r\n                    },\r\n                };\r\n            }\r\n            else {\r\n                stateRef.current = {\r\n                    x: stateRef.current.x + delta[0] / parentScale,\r\n                    y: stateRef.current.y + delta[1] / parentScale,\r\n                };\r\n            }\r\n        },\r\n        onDragStart: function (_a) {\r\n            var event = _a.event;\r\n            if (cancel && cancel(event)) {\r\n                return;\r\n            }\r\n            activeRef.current = true;\r\n        },\r\n        onDragEnd: function () { return (activeRef.current = false); },\r\n    }); }, [activeRef, stateRef, parentScaleGetter, cancel]);\r\n    return handlers;\r\n}\r\n//# sourceMappingURL=useDragHandlers.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { useCallback, useRef } from 'react';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { useRecoilCallback } from 'recoil';\r\nimport { diagramScaleState } from '../../states/diagramState';\r\nimport { generateTransform } from '../../utils';\r\nimport { useNotifyRef } from '../useNotifyRef';\r\nimport { usePositionSync, useUserAbilityToSelectSwitcher } from './common';\r\nimport { useDragHandlers } from './useDragHandlers';\r\nexport var useNodeUserInteraction = function (node, setNode, enable) {\r\n    var _a, _b;\r\n    // useState instead of reference cause the situation, when multiple gesture callback invocations go before state actually updates,\r\n    // so those invocations will rely on old state data.\r\n    var positionRef = useNotifyRef(node.position);\r\n    // Should trigger rendering on change, otherwise useUserSelectSwitcher will not be invoked\r\n    var activeRef = useNotifyRef(false);\r\n    var userInteractionElemRef = useRef(null);\r\n    // Do not use useRecoilValue as it would rerender the node anytime the diagram's scale changes\r\n    var getDiagramScale = useRecoilCallback(function (_a) {\r\n        var snapshot = _a.snapshot;\r\n        return function () {\r\n            var scaleState = snapshot.getLoadable(diagramScaleState).contents;\r\n            return typeof scaleState === 'number' ? scaleState : 1;\r\n        };\r\n    });\r\n    var nodePositionSetter = useCallback(function (getNewPosition) {\r\n        setNode(function (currentNodeState) {\r\n            var newNodePosition = getNewPosition(currentNodeState.position);\r\n            if (currentNodeState.position !== newNodePosition) {\r\n                return __assign(__assign({}, currentNodeState), { position: newNodePosition });\r\n            }\r\n            else\r\n                return currentNodeState;\r\n        });\r\n    }, [setNode]);\r\n    usePositionSync(activeRef.current, positionRef, node.position, nodePositionSetter);\r\n    var dragHandlers = useDragHandlers(activeRef, positionRef, getDiagramScale);\r\n    useGesture(dragHandlers, {\r\n        domTarget: userInteractionElemRef,\r\n        eventOptions: { passive: false },\r\n        enabled: enable,\r\n    });\r\n    useUserAbilityToSelectSwitcher(activeRef.current, (_b = (_a = userInteractionElemRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.body);\r\n    return {\r\n        transform: generateTransform(positionRef.current),\r\n        active: activeRef.current,\r\n        userInteractionElemRef: userInteractionElemRef\r\n    };\r\n};\r\n//# sourceMappingURL=useNodeUserInteraction.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { useEffect } from 'react';\r\nimport { useRecoilValue } from 'recoil';\r\nimport { defaultNodeType } from '..';\r\nimport { useNodeState } from '../hooks/nodeHooks';\r\nimport { useNotifyRef } from '../hooks/useNotifyRef';\r\nimport { useNodeUserInteraction } from '../hooks/userInteractions/useNodeUserInteraction';\r\nimport { nodeComponentDefinitionState } from '../states/nodesSettingsState';\r\nexport var NodeWrapper = function (props) {\r\n    var _a;\r\n    var _b = useNodeState(props.id), node = _b[0], setNode = _b[1];\r\n    var nodeComponentDefinition = useRecoilValue(nodeComponentDefinitionState((_a = node.type) !== null && _a !== void 0 ? _a : defaultNodeType));\r\n    var nodeRef = useNodeRef(node, setNode);\r\n    var _c = useNodeUserInteraction(node, setNode), transform = _c.transform, userInteractionElemRef = _c.userInteractionElemRef;\r\n    return (React.createElement(\"div\", { id: node.id, className: 'react_fast_diagram_NodeWrapper', style: {\r\n            transform: transform,\r\n        }, ref: nodeRef },\r\n        React.createElement(nodeComponentDefinition.component, { ref: userInteractionElemRef, node: node, setNode: setNode, settings: nodeComponentDefinition.settings })));\r\n};\r\nexport var NodeWrapperMemo = React.memo(NodeWrapper);\r\nfunction useNodeRef(node, setNode) {\r\n    var nodeRef = useNotifyRef(null);\r\n    useEffect(function () {\r\n        setNode(function (curValue) {\r\n            if (curValue.ref !== nodeRef) {\r\n                return __assign(__assign({}, curValue), { ref: nodeRef });\r\n            }\r\n            else\r\n                return curValue;\r\n        });\r\n    }, [nodeRef, node.ref]);\r\n    return nodeRef;\r\n}\r\n//# sourceMappingURL=NodeWrapper.js.map","import React from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport { nodesIdsState } from '../states/nodeState';\r\nimport { NodeWrapperMemo } from './NodeWrapper';\r\nvar NodesLayer = function () {\r\n    var nodes = useRecoilState(nodesIdsState)[0];\r\n    return (React.createElement(\"div\", null, nodes.map(function (id) { return (React.createElement(NodeWrapperMemo, { key: id, id: id })); })));\r\n};\r\nexport var NodesLayerMemorized = React.memo(NodesLayer);\r\n//# sourceMappingURL=NodesLayer.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { commonSettingsState, defaultLinkType, linksIdsState, linkWithIdState, nodesIdsState, nodeWithIdState, } from '..';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { nodesSettingsState, } from './nodesSettingsState';\r\nimport { linksSettingsState, } from './linksSettingsState';\r\nexport function initializeDiagram(snap, settings, initState) {\r\n    initializeSettings(snap, settings);\r\n    initializeState(snap, initState);\r\n}\r\nexport function initializeState(snap, initializer) {\r\n    if (!initializer) {\r\n        return;\r\n    }\r\n    initializeNodesState(snap, initializer.nodes);\r\n    initializeLinksState(snap, initializer.links);\r\n}\r\nexport function initializeSettings(snap, settings) {\r\n    if (!settings) {\r\n        return;\r\n    }\r\n    if (settings.common) {\r\n        snap.set(commonSettingsState, settings.common);\r\n    }\r\n    if (settings.nodes) {\r\n        var loadable = snap.getLoadable(nodesSettingsState);\r\n        if ('defaultNodeType' in loadable.contents) {\r\n            snap.set(nodesSettingsState, __assign(__assign({}, loadable.contents), settings.nodes));\r\n        }\r\n    }\r\n    if (settings.links) {\r\n        var loadable = snap.getLoadable(linksSettingsState);\r\n        if ('defaultLinkType' in loadable.contents) {\r\n            snap.set(linksSettingsState, __assign(__assign({}, loadable.contents), settings.links));\r\n        }\r\n    }\r\n}\r\nexport function initializeNodesState(snap, nodes) {\r\n    nodes.forEach(function (node) {\r\n        snap.set(nodeWithIdState(node.id), node);\r\n    });\r\n    snap.set(nodesIdsState, nodes.map(function (node) { return node.id; }));\r\n}\r\nexport function initializeLinksState(snap, links) {\r\n    var linksIds = [];\r\n    links.forEach(function (linkOriginal) {\r\n        var _a;\r\n        var link = __assign({ type: defaultLinkType, id: (_a = linkOriginal.id) !== null && _a !== void 0 ? _a : uuidv4() }, linkOriginal);\r\n        linksIds.push(link.id);\r\n        snap.set(linkWithIdState(link.id), link);\r\n    });\r\n    snap.set(linksIdsState, linksIds);\r\n}\r\n//# sourceMappingURL=initializers.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { useCallback, useEffect, useRef } from 'react';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { useRecoilState } from 'recoil';\r\nimport { diagramTransformationState } from '../../states/diagramState';\r\nimport { areTranformationsEqual, generateTransform, } from '../../utils';\r\nimport { useNotifyRef } from '../useNotifyRef';\r\nimport { useUserAbilityToSelectSwitcher } from './common';\r\nimport { useDragHandlers } from './useDragHandlers';\r\nimport { usePinchHandlers } from './usePinchHandlers';\r\nimport { useWheelHandler } from './useWheelHandler';\r\nexport var useDiagramUserInteraction = function (enable) {\r\n    var _a, _b;\r\n    var _c = useRecoilState(diagramTransformationState), transformation = _c[0], setTransformation = _c[1];\r\n    var stateRef = useNotifyRef({\r\n        scale: transformation.scale,\r\n        position: transformation.position,\r\n    });\r\n    var activeRef = useNotifyRef(false);\r\n    var userInteractionElemRef = useRef(null);\r\n    useTransformationSync(activeRef.current, stateRef, transformation, setTransformation);\r\n    var cancelGesture = useCallback(function (event) { return event.target !== userInteractionElemRef.current; }, [userInteractionElemRef]);\r\n    var dragHandlers = useDragHandlers(activeRef, stateRef, undefined, cancelGesture);\r\n    var pinchHandlers = usePinchHandlers(userInteractionElemRef, activeRef, stateRef, cancelGesture);\r\n    var wheelHandler = useWheelHandler(userInteractionElemRef, activeRef, stateRef, setTransformation);\r\n    useGesture(__assign(__assign(__assign({}, dragHandlers), pinchHandlers), wheelHandler), {\r\n        domTarget: userInteractionElemRef,\r\n        eventOptions: { passive: false },\r\n        enabled: enable,\r\n    });\r\n    useUserAbilityToSelectSwitcher(activeRef.current, (_b = (_a = userInteractionElemRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.body);\r\n    return {\r\n        userInteractionElemRef: userInteractionElemRef,\r\n        transform: generateTransform(stateRef.current.position, stateRef.current.scale),\r\n        active: activeRef.current,\r\n    };\r\n};\r\nfunction useTransformationSync(active, internalTransformationRef, externalTransformation, setExternalTransformation) {\r\n    useEffect(function () {\r\n        if (!active) {\r\n            if (!areTranformationsEqual(internalTransformationRef.current, externalTransformation)) {\r\n                internalTransformationRef.current = {\r\n                    scale: externalTransformation.scale,\r\n                    position: externalTransformation.position,\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            setExternalTransformation(function (currentTransformation) {\r\n                if (!areTranformationsEqual(currentTransformation, internalTransformationRef.current)) {\r\n                    return internalTransformationRef.current;\r\n                }\r\n                else\r\n                    return currentTransformation;\r\n            });\r\n        }\r\n    }, [\r\n        active,\r\n        internalTransformationRef.current,\r\n        externalTransformation,\r\n        setExternalTransformation,\r\n    ]);\r\n}\r\n//# sourceMappingURL=useDiagramUserInteraction.js.map","import { useMemo, useRef } from 'react';\r\nimport { addPoints, computeTransformationOnScale, } from '../../utils';\r\nexport function usePinchHandlers(elemToAttachToRef, activeRef, stateRef, cancel) {\r\n    var pinchState = useRef({\r\n        distance: 0,\r\n        origin: [0, 0],\r\n    });\r\n    var handlers = useMemo(function () { return ({\r\n        onPinch: function (_a) {\r\n            var distance = _a.da[0], origin = _a.origin;\r\n            if (!activeRef.current) {\r\n                return;\r\n            }\r\n            var originDiff = {\r\n                x: origin[0] - pinchState.current.origin[0],\r\n                y: origin[1] - pinchState.current.origin[1],\r\n            };\r\n            var diff = distance - pinchState.current.distance;\r\n            if (Math.abs(diff) > 1 && elemToAttachToRef.current) {\r\n                var elWidth = elemToAttachToRef.current.clientWidth * stateRef.current.scale;\r\n                var targetElWidth = elWidth + diff;\r\n                var factor = targetElWidth / elWidth;\r\n                var scaleTransformation = computeTransformationOnScale(elemToAttachToRef.current, { x: origin[0], y: origin[1] }, addPoints(stateRef.current.position, originDiff), stateRef.current.scale, factor);\r\n                pinchState.current = {\r\n                    distance: distance,\r\n                    origin: origin,\r\n                };\r\n                stateRef.current = scaleTransformation;\r\n            }\r\n            else {\r\n                pinchState.current = {\r\n                    distance: pinchState.current.distance,\r\n                    origin: origin,\r\n                };\r\n                stateRef.current = {\r\n                    scale: stateRef.current.scale,\r\n                    position: addPoints(stateRef.current.position, originDiff),\r\n                };\r\n            }\r\n        },\r\n        onPinchStart: function (_a) {\r\n            var distance = _a.da[0], origin = _a.origin, event = _a.event;\r\n            if (cancel && cancel(event)) {\r\n                return;\r\n            }\r\n            pinchState.current = {\r\n                distance: distance,\r\n                origin: origin,\r\n            };\r\n            activeRef.current = true;\r\n        },\r\n        onPinchEnd: function () { return (activeRef.current = false); },\r\n    }); }, [elemToAttachToRef, activeRef, stateRef, cancel]);\r\n    return handlers;\r\n}\r\n//# sourceMappingURL=usePinchHandlers.js.map","import { useMemo } from 'react';\r\nimport { computeTransformationOnScale } from '../../utils';\r\nexport function useWheelHandler(elemToAttachToRef, activeRef, stateRef, setTransformation) {\r\n    var handlers = useMemo(function () { return ({\r\n        onWheel: function (_a) {\r\n            var _b = _a.direction, _ = _b[0], yDirection = _b[1], _c = _a.event, clientX = _c.clientX, clientY = _c.clientY;\r\n            if (elemToAttachToRef.current) {\r\n                var factor = 0.9;\r\n                if (yDirection < 0) {\r\n                    factor = 1 / factor;\r\n                }\r\n                var newTransformation = computeTransformationOnScale(elemToAttachToRef.current, { x: clientX, y: clientY }, stateRef.current.position, stateRef.current.scale, factor);\r\n                setTransformation(newTransformation);\r\n            }\r\n        },\r\n    }); }, [elemToAttachToRef, activeRef, stateRef, setTransformation]);\r\n    return handlers;\r\n}\r\n//# sourceMappingURL=useWheelHandler.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { forwardRef, useImperativeHandle } from 'react';\r\nimport { useRecoilCallback } from 'recoil';\r\nimport { LinksLayerMemorized } from './LinksLayer';\r\nimport { NodesLayerMemorized } from './NodesLayer';\r\nimport { nodesIdsState, nodeWithIdState } from '../states/nodeState';\r\nimport { linksIdsState, linkWithIdState } from '../states/linkState';\r\nimport { initializeState } from '../states/initializers';\r\nimport { useDiagramUserInteraction } from '../hooks/userInteractions/useDiagramUserInteraction';\r\nexport var InnerDiagram = forwardRef(function (props, ref) {\r\n    var _a = useDiagramUserInteraction(), transform = _a.transform, userInteractionElemRef = _a.userInteractionElemRef;\r\n    // TODO: Move to states\r\n    var addNode = useRecoilCallback(function (_a) {\r\n        var set = _a.set;\r\n        return function (newNode) {\r\n            set(nodeWithIdState(newNode.id), newNode);\r\n            set(nodesIdsState, function (v) { return v.concat([newNode.id]); });\r\n        };\r\n    });\r\n    var reinitState = useRecoilCallback(function (_a) {\r\n        var snapshot = _a.snapshot, gotoSnapshot = _a.gotoSnapshot;\r\n        return function (initializer) {\r\n            gotoSnapshot(snapshot.map(function (m) {\r\n                var nodeIds = m.getLoadable(nodesIdsState).contents;\r\n                if (Array.isArray(nodeIds)) {\r\n                    nodeIds.forEach(function (id) { return m.reset(nodeWithIdState(id)); });\r\n                }\r\n                var linksIds = m.getLoadable(linksIdsState).contents;\r\n                if (Array.isArray(linksIds)) {\r\n                    linksIds.forEach(function (id) { return m.reset(linkWithIdState(id)); });\r\n                }\r\n                initializeState(m, initializer);\r\n            }));\r\n        };\r\n    });\r\n    useImperativeHandle(ref, function () { return ({\r\n        addNode: addNode,\r\n        setState: reinitState,\r\n    }); }, []);\r\n    return (React.createElement(\"div\", { ref: userInteractionElemRef, style: __assign({ touchAction: 'none' }, props.diagramStyles), className: 'react_fast_diagram_DiagramInner' },\r\n        React.createElement(\"div\", { className: 'react_fast_diagram_DiagramInner_DraggablePart', style: {\r\n                transform: transform,\r\n            } },\r\n            React.createElement(LinksLayerMemorized, null),\r\n            React.createElement(NodesLayerMemorized, null))));\r\n});\r\nInnerDiagram.displayName = 'InnerDiagram';\r\n//# sourceMappingURL=DiagramInner.js.map","import React, { forwardRef, useCallback } from 'react';\r\nimport { RecoilRoot } from 'recoil';\r\nimport { InnerDiagram } from './DiagramInner';\r\nimport { initializeDiagram, } from '../states/initializers';\r\nimport '../Diagram.css';\r\nexport var Diagram = forwardRef(function (props, ref) {\r\n    var initializeDiagramWrapper = useCallback(function (snap) {\r\n        return initializeDiagram(snap, props.settings, props.initState);\r\n    }, []);\r\n    return (React.createElement(RecoilRoot, { initializeState: initializeDiagramWrapper },\r\n        React.createElement(InnerDiagram, { ref: ref })));\r\n});\r\nDiagram.displayName = 'Diagram';\r\n//# sourceMappingURL=Diagram.js.map","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Tune } from '@material-ui/icons';\r\nimport Card from '@material-ui/core/Card';\r\nimport { Box, Button, TextField, Typography } from '@material-ui/core';\r\nimport { IDiagramInitState } from '@react-easy-diagram/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '7px',\r\n  },\r\n  visibilityBtn: {\r\n    borderRadius: '25px',\r\n    minWidth: '24px',\r\n    padding: '8px 8px',\r\n    backgroundColor: 'white',\r\n  },\r\n  header: {\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '14px',\r\n  },\r\n}));\r\n\r\nconst generateLargeDiagram = (colNum: number, rowNum: number): IDiagramInitState => {\r\n  const nodes = [];\r\n  const links = [];\r\n  const getNodeId = (i: number,j: number) => `node_${i}_${j}`;\r\n\r\n  for (let i = 0; i < colNum; i++) {\r\n    for (let j = 0; j < rowNum; j++) {\r\n      nodes.push({\r\n        id: getNodeId(i,j),\r\n        position: { x: i * 120, y: j * 120 },\r\n      });\r\n      if (i - 1 >= 0) {\r\n        links.push({\r\n          source: {\r\n            nodeId: getNodeId(i - 1,j)\r\n          },\r\n          target: {\r\n            nodeId: getNodeId(i,j)\r\n          }\r\n        });\r\n      }\r\n      if (j - 1 >= 0) {\r\n        links.push({\r\n          source: {\r\n            nodeId: getNodeId(i,j - 1)\r\n          },\r\n          target: {\r\n            nodeId: getNodeId(i,j)\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return {nodes,links};\r\n};\r\n\r\nexport interface ControlPanelProps{\r\n  reinitState?(initializer: IDiagramInitState): void;\r\n}\r\n\r\nexport const ControlPanel = (props: ControlPanelProps) => {\r\n  const classes = useStyles();\r\n\r\n  const [row, setRow] = useState(10);\r\n  const [col, setCol] = useState(10);\r\n\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  const onFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    if (props.reinitState) {\r\n      props.reinitState(generateLargeDiagram(row, col));\r\n    }\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  if (visible) {\r\n    return (\r\n      <Box padding={3} clone>\r\n        <Card>\r\n          <div className={classes.header}>\r\n            <Button\r\n              className={classes.visibilityBtn}\r\n              variant='outlined'\r\n              aria-label='control-panel'\r\n              onClick={() => setVisible(false)}\r\n            >\r\n              <Tune />\r\n            </Button>\r\n            <Typography variant='h5'>Control Panel</Typography>\r\n          </div>\r\n          <form\r\n            className={classes.form}\r\n            noValidate\r\n            autoComplete='off'\r\n            onSubmit={onFormSubmit}\r\n          >\r\n            <TextField\r\n              id='rows'\r\n              value={row}\r\n              type='number'\r\n              label='Rows'\r\n              variant='outlined'\r\n              onChange={(e) => setRow(parseInt(e.target.value))}\r\n            />\r\n            <TextField\r\n              id='columns'\r\n              value={col}\r\n              type='number'\r\n              label='Columns'\r\n              variant='outlined'\r\n              onChange={(e) => setCol(parseInt(e.target.value))}\r\n            />\r\n            <Button variant='contained' type='submit'>\r\n              Generate new Diagram\r\n            </Button>\r\n          </form>\r\n        </Card>\r\n      </Box>\r\n    );\r\n  } else {\r\n    return (\r\n      <Button\r\n        variant='outlined'\r\n        className={classes.visibilityBtn}\r\n        aria-label='control-panel'\r\n        onClick={() => setVisible(true)}\r\n      >\r\n        <Tune />\r\n      </Button>\r\n    );\r\n  }\r\n};\r\n","import React from 'react';\r\nimport './App.css';\r\nimport {\r\n  createCurvedLinkPathConstructor,\r\n  createLinkDefault,\r\n  IDiagramInitState,\r\n  useDiagram,\r\n} from '@react-easy-diagram/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { ControlPanel } from './ControlPanel';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  diagram: {\r\n    height: '100vh',\r\n    width: '100vw',\r\n    backgroundColor: '#dbdbdb',\r\n    backgroundImage:\r\n      \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.3'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\\\")\",\r\n  },\r\n  controlPanel: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    left: '20px',\r\n  },\r\n}));\r\n\r\nexport const App = () => {\r\n  const classes = useStyles();\r\n  const { Diagram, apiRef } = useDiagram(\r\n    {\r\n      links: {\r\n        linkComponents: {\r\n          default: createLinkDefault(),\r\n          attention: createLinkDefault({color: 'red'})\r\n        },\r\n        pathConstructor: createCurvedLinkPathConstructor()\r\n      }\r\n    },\r\n    initState\r\n  );\r\n\r\n  return (\r\n    <Box className={classes.diagram}>\r\n      <Diagram />\r\n      <Box className={classes.controlPanel}>\r\n        <ControlPanel reinitState={apiRef.current?.setState} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst initState: IDiagramInitState = {\r\n  nodes: [\r\n    {\r\n      id: 'Node 1',\r\n      position: {\r\n        x: 300,\r\n        y: 300,\r\n      },\r\n    },\r\n    {\r\n      id: 'Node 2',\r\n      position: {\r\n        x: 520,\r\n        y: 400,\r\n      },\r\n    },\r\n    {\r\n      id: 'Node 3',\r\n      position: {\r\n        x: 520,\r\n        y: 200,\r\n      },\r\n    },\r\n  ],\r\n  links: [\r\n    {\r\n      source: {\r\n        nodeId: 'Node 2',\r\n      },\r\n      target: {\r\n        nodeId: 'Node 1',\r\n      },\r\n      type: 'attention'\r\n    },\r\n    {\r\n      source: {\r\n        nodeId: 'Node 2',\r\n      },\r\n      target: {\r\n        nodeId: 'Node 3',\r\n      }\r\n    },\r\n  ],\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { Diagram } from '../components/Diagram';\r\nimport { useNotifyRef } from './useNotifyRef';\r\nexport var useDiagram = function (settings, initState) {\r\n    var apiRef = useNotifyRef(null);\r\n    var obj = useMemo(function () { return ({\r\n        Diagram: function () { return (React.createElement(Diagram, { ref: apiRef, initState: initState, settings: settings })); },\r\n        apiRef: apiRef,\r\n    }); }, []);\r\n    return obj;\r\n};\r\n//# sourceMappingURL=useDiagram.js.map","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}