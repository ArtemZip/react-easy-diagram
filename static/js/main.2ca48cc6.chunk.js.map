{"version":3,"sources":["../../../src/states/common.ts","../../../src/states/linkState.ts","../../../src/components/LinkDefault.tsx","../../../src/linkConstructors/simple.ts","../../../src/states/linksSettingsState.ts","../../../src/states/nodeState.ts","../../../src/hooks/nodeHooks.ts","../../../src/hooks/linkHooks.ts","../../../src/hooks/useNotifyRef.ts","../../../src/components/LinkWrapper.tsx","../../../src/components/LinksLayer.tsx","../../src/utils.ts","../../../src/hooks/useDragAndZoom.ts","../../../src/states/diagramState.ts","../../../src/components/Node.tsx","../../../src/components/NodesLayer.tsx","../../../src/components/DiagramInner.tsx","../../../src/components/Diagram.tsx","../../../src/hooks/diagramHooks.ts","ControlPanel.tsx","App.tsx","index.tsx"],"names":["key","default","_b","elemToAttachTo","parentScale","initTranslate","initializer","useStyles","makeStyles","form","display","flexDirection","gap","visibilityBtn","borderRadius","minWidth","padding","backgroundColor","header","marginBottom","alignItems","ControlPanel","props","classes","useState","row","setRow","col","setCol","visible","setVisible","Box","clone","Card","className","Button","variant","aria-label","onClick","Tune","Typography","noValidate","autoComplete","onSubmit","e","reinitState","colNum","rowNum","nodes","links","getNodeId","i","j","push","id","position","x","y","source","nodeId","target","generateLargeDiagram","preventDefault","stopPropagation","TextField","value","type","label","onChange","parseInt","diagram","height","width","backgroundImage","controlPanel","top","left","App","diagramRef","ref","initialState","initDiagram","current","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2ca48cc6.chunk.js","sourcesContent":["export var libraryPrefix = 'reactEasyDiagram';\r\n//# sourceMappingURL=common.js.map","import { atom, atomFamily } from 'recoil';\r\nimport { libraryPrefix } from './common';\r\nexport var linksIdsState = atom({\r\n    key: libraryPrefix + \"_LinksIds\",\r\n    default: [],\r\n});\r\nexport var linkWithIdState = atomFamily({\r\n    key: libraryPrefix + \"_Link\",\r\n    default: function (id) { return ({ id: id, type: defaultLinkType }); },\r\n});\r\nexport var defaultLinkType = 'simple';\r\n//# sourceMappingURL=linkState.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { forwardRef } from 'react';\r\nexport var LinkDefault = forwardRef(function (props, ref) {\r\n    var settings = __assign({ color: 'LightBlue', strokeWidth: 3 }, (props.settings ? props.settings : {}));\r\n    return (React.createElement(\"path\", { ref: ref, d: props.path, stroke: settings.color, strokeWidth: settings.strokeWidth, fill: 'none' }));\r\n});\r\n// <g>\r\n//       {/* Main line */}\r\n//       <path d={points} stroke={linkColor} strokeWidth=\"3\" fill=\"none\" />\r\n//       {/* Thick line to make selection easier */}\r\n//       <path\r\n//         d={points}\r\n//         stroke={linkColor}\r\n//         strokeWidth=\"20\"\r\n//         fill=\"none\"\r\n//         strokeLinecap=\"round\"\r\n//         strokeOpacity={isHovered || isSelected ? 0.1 : 0}\r\n//         onMouseEnter={() => onLinkMouseEnter({ config, linkId: link.id })}\r\n//         onMouseLeave={() => onLinkMouseLeave({ config, linkId: link.id })}\r\n//         onClick={(e) => {\r\n//           onLinkClick({ config, linkId: link.id })\r\n//           e.stopPropagation()\r\n//         }}\r\n//       />\r\n//     </g>\r\n//# sourceMappingURL=LinkDefault.js.map","export function simpleLinkPathConstructor(state) {\r\n    var fromPoint = getEndpointPoint(state.source);\r\n    var toPoint = getEndpointPoint(state.target);\r\n    var path = \"M \" + fromPoint.x + \" \" + fromPoint.y + \", \" + toPoint.x + \" \" + toPoint.y;\r\n    return path;\r\n}\r\nexport function getEndpointPoint(endpoint) {\r\n    if ('node' in endpoint) {\r\n        return getEndpointPointForNode(endpoint);\r\n    }\r\n    else {\r\n        return endpoint.position;\r\n    }\r\n}\r\nexport function getEndpointPointForNode(endpoint) {\r\n    var _a, _b;\r\n    var htmlElem = (_b = (_a = endpoint.node) === null || _a === void 0 ? void 0 : _a.ref) === null || _b === void 0 ? void 0 : _b.current;\r\n    if (htmlElem) {\r\n        return {\r\n            x: endpoint.node.position.x +\r\n                (htmlElem.clientWidth ? htmlElem.clientWidth / 2 : 0),\r\n            y: endpoint.node.position.y +\r\n                (htmlElem.clientHeight ? htmlElem.clientHeight / 2 : 0),\r\n        };\r\n    }\r\n    else {\r\n        return endpoint.node.position;\r\n    }\r\n}\r\n//# sourceMappingURL=simple.js.map","import { atom } from 'recoil';\r\nimport { LinkDefault } from '../components/LinkDefault';\r\nimport { simpleLinkPathConstructor } from '../linkConstructors/simple';\r\nimport { libraryPrefix } from './common';\r\nimport { defaultLinkType } from './linkState';\r\nexport var linksSettingsState = atom({\r\n    key: libraryPrefix + \"_LinksSettings\",\r\n    default: {\r\n        defaultLinkType: defaultLinkType,\r\n        linkTypeToComponent: {\r\n            default: LinkDefault,\r\n        },\r\n        linkTypeToPathConstructor: {\r\n            simple: simpleLinkPathConstructor,\r\n        },\r\n        pathConstructorsSettings: {},\r\n        linkComponentsSettings: {},\r\n    },\r\n});\r\n//# sourceMappingURL=linksSettingsState.js.map","import { atom, atomFamily } from 'recoil';\r\nimport { libraryPrefix } from './common';\r\nexport var nodesIdsState = atom({\r\n    key: libraryPrefix + \"_NodesIds\",\r\n    default: [],\r\n});\r\nexport var nodeWithIdState = atomFamily({\r\n    key: libraryPrefix + \"_Node\",\r\n    default: function (id) { return ({ id: id, position: { x: 0, y: 0 } }); },\r\n});\r\n//# sourceMappingURL=nodeState.js.map","import { useRecoilState } from \"recoil\";\r\nimport { nodeWithIdState } from \"../states/nodeState\";\r\nexport var useNodeState = function (id) { return useRecoilState(nodeWithIdState(id)); };\r\n//# sourceMappingURL=nodeHooks.js.map","import { useRecoilState } from 'recoil';\r\nimport { linksSettingsState } from '../states/linksSettingsState';\r\nimport { linkWithIdState, } from '../states/linkState';\r\nimport { useNodeState } from './nodeHooks';\r\nexport var useLinksSettings = function () { return useRecoilState(linksSettingsState); };\r\nexport var useLinkState = function (id) { return useRecoilState(linkWithIdState(id)); };\r\nexport var useLinkStateExtended = function (id) {\r\n    var _a = useLinkState(id), link = _a[0], setLink = _a[1];\r\n    var sourceNode = useNodeState(getNodeIdForLinkEndpoint(link.source))[0];\r\n    var targetNode = useNodeState(getNodeIdForLinkEndpoint(link.target))[0];\r\n    return [\r\n        {\r\n            link: link,\r\n            source: {\r\n                node: sourceNode,\r\n            },\r\n            target: {\r\n                node: targetNode,\r\n            },\r\n        },\r\n        setLink,\r\n    ];\r\n};\r\nvar getNodeIdForLinkEndpoint = function (target) {\r\n    if (!target) {\r\n        return '';\r\n    }\r\n    if ('nodeId' in target) {\r\n        return target.nodeId;\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n};\r\n//# sourceMappingURL=linkHooks.js.map","import { useState } from \"react\";\r\nexport var useNotifyRef = function (init) {\r\n    var _a = useState(0), _ = _a[0], forceUpdate = _a[1];\r\n    var ref = useState(function () { return ({\r\n        value: init,\r\n        facade: {\r\n            get current() {\r\n                return ref.value;\r\n            },\r\n            set current(value) {\r\n                var last = ref.value;\r\n                if (last !== value) {\r\n                    ref.value = value;\r\n                    forceUpdate(function (i) { return i + 1; });\r\n                }\r\n            },\r\n        },\r\n    }); })[0];\r\n    return ref.facade;\r\n};\r\n//# sourceMappingURL=useNotifyRef.js.map","import React from 'react';\r\nimport { useLinksSettings, useLinkStateExtended } from '../hooks/linkHooks';\r\nimport { useNotifyRef } from '../hooks/useNotifyRef';\r\nexport var LinkWrapper = function (props) {\r\n    var _a;\r\n    var linkStateExtended = useLinkStateExtended(props.id)[0];\r\n    var linksSettings = useLinksSettings()[0];\r\n    var linkRef = useNotifyRef(null);\r\n    var linkType = linkStateExtended.link.type;\r\n    var pathConstructor = linksSettings.linkTypeToPathConstructor[linkType];\r\n    var path = pathConstructor(linkStateExtended);\r\n    var LinkComponent = (_a = linksSettings.linkTypeToComponent[linkType]) !== null && _a !== void 0 ? _a : linksSettings.linkTypeToComponent.default;\r\n    return React.createElement(\"g\", null,\r\n        React.createElement(LinkComponent, { ref: linkRef, path: path }));\r\n};\r\nexport var LinkWrapperMemo = React.memo(LinkWrapper);\r\n//# sourceMappingURL=LinkWrapper.js.map","import React from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport { linksIdsState } from '../states/linkState';\r\nimport { LinkWrapperMemo } from './LinkWrapper';\r\nvar LinksLayer = function () {\r\n    var links = useRecoilState(linksIdsState)[0];\r\n    return (React.createElement(\"svg\", null, links.map(function (id) { return (React.createElement(LinkWrapperMemo, { key: id, id: id })); })));\r\n};\r\nexport var LinksLayerMemorized = React.memo(LinksLayer);\r\n//# sourceMappingURL=LinksLayer.js.map","export var generateTransform = function (translate, scale) {\r\n    var translatePart = \"translate(\" + translate.x + \"px, \" + translate.y + \"px)\";\r\n    if (scale) {\r\n        var scalePart = \"scale(\" + scale + \")\";\r\n        return translatePart + ' ' + scalePart;\r\n    }\r\n    else {\r\n        return translatePart;\r\n    }\r\n};\r\n// See: https://stackoverflow.com/a/30039971/9142642\r\nexport var computeTransformationOnScale = function (target, midpoint, translate, scale, factor) {\r\n    // The upper left corner of the target stays in the same place while the picture is enlarged\r\n    var rect = target.getBoundingClientRect();\r\n    // Get mouse position related to target\r\n    var mouseXPos = midpoint.x - rect.left;\r\n    var mouseYPos = midpoint.y - rect.top;\r\n    // Now consider the point under the mouse cursor. Every pixel above and to the\r\n    // left of the cursor has become *factor* larger. This displaces the point under the\r\n    // cursor by *factor* downward and to the right. Meanwhile, the cursor is in the same position.\r\n    // Note that the target might have been moved in the canvas before the zooming operation, so the\r\n    // cursor's horizontal position in the target is mouseXPos - transformation.translation.x before zooming,\r\n    // and likewise for the vertical position.\r\n    var dx = (mouseXPos - translate.x) * (factor - 1);\r\n    var dy = (mouseYPos - translate.y) * (factor - 1);\r\n    return {\r\n        scale: scale * factor,\r\n        translate: {\r\n            // Compensate for the displacement by moving the point back under the cursor\r\n            x: translate.x - dx,\r\n            y: translate.y - dy,\r\n        },\r\n    };\r\n};\r\nexport var roundPoint = function (point) { return ({\r\n    x: Math.round(point.x),\r\n    y: Math.round(point.y),\r\n}); };\r\nexport var addPoints = function (a, b) { return ({\r\n    x: a.x + b.x,\r\n    y: a.y + b.y\r\n}); };\r\nexport var subtractPoints = function (a, b) { return ({\r\n    x: a.x - b.x,\r\n    y: a.y - b.y\r\n}); };\r\nexport var multiplyPoint = function (a, m) { return ({\r\n    x: a.x * m,\r\n    y: a.y * m\r\n}); };\r\n//# sourceMappingURL=utils.js.map","import { useEffect, useRef } from 'react';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { addPoints, computeTransformationOnScale, generateTransform, } from '../utils';\r\nimport { useNotifyRef } from './useNotifyRef';\r\nfunction eventTargetContainsClass(eventTarget, className) {\r\n    if (eventTarget && 'classList' in eventTarget) {\r\n        return eventTarget.classList.contains(className);\r\n    }\r\n    else\r\n        return false;\r\n}\r\nexport var useDragAndZoom = function (props) {\r\n    var _a, _b;\r\n    // useState instead of reference cause the situation, when multiple gesture callback invocations go before state actually updates,\r\n    // so those invocations will rely on old state data.\r\n    var state = useNotifyRef({\r\n        scale: (_a = props.initScale) !== null && _a !== void 0 ? _a : 1,\r\n        translate: (_b = props.initTranslate) !== null && _b !== void 0 ? _b : { x: 0, y: 0 },\r\n    });\r\n    var pinchState = useRef({\r\n        distance: 0,\r\n        origin: [0, 0],\r\n    });\r\n    var gestureStartInAppropriateElem = useRef(false);\r\n    // Should trigger rendering on change, otherwise useEffect will not be invoked \r\n    var active = useNotifyRef(false);\r\n    var _c = useGesture({\r\n        onDrag: function (_a) {\r\n            var _b;\r\n            var delta = _a.delta, pinching = _a.pinching;\r\n            if (!active || pinching || !gestureStartInAppropriateElem.current) {\r\n                return;\r\n            }\r\n            var parentScale = (_b = props.parentScale) !== null && _b !== void 0 ? _b : 1;\r\n            state.current = {\r\n                scale: state.current.scale,\r\n                translate: {\r\n                    x: state.current.translate.x + delta[0] / parentScale,\r\n                    y: state.current.translate.y + delta[1] / parentScale,\r\n                },\r\n            };\r\n        },\r\n        onDragStart: function (_a) {\r\n            var event = _a.event;\r\n            gestureStartInAppropriateElem.current =\r\n                !props.listenOnlyClass ||\r\n                    eventTargetContainsClass(event.target, props.listenOnlyClass);\r\n            if (gestureStartInAppropriateElem.current) {\r\n                active.current = true;\r\n            }\r\n        },\r\n        onDragEnd: function () { return active.current = false; },\r\n        onPinch: function (_a) {\r\n            var distance = _a.da[0], origin = _a.origin;\r\n            if (!active) {\r\n                return;\r\n            }\r\n            var originDiff = {\r\n                x: origin[0] - pinchState.current.origin[0],\r\n                y: origin[1] - pinchState.current.origin[1],\r\n            };\r\n            var diff = distance - pinchState.current.distance;\r\n            if (Math.abs(diff) > 1 && props.elemToAttachTo.current) {\r\n                var elWidth = props.elemToAttachTo.current.clientWidth * state.current.scale;\r\n                var targetElWidth = elWidth + diff;\r\n                var factor = targetElWidth / elWidth;\r\n                var scaleTransformation = computeTransformationOnScale(props.elemToAttachTo.current, { x: origin[0], y: origin[1] }, state.current.translate, state.current.scale, factor);\r\n                scaleTransformation.translate = addPoints(scaleTransformation.translate, originDiff);\r\n                pinchState.current = {\r\n                    distance: distance,\r\n                    origin: origin,\r\n                };\r\n                state.current = scaleTransformation;\r\n            }\r\n            else {\r\n                pinchState.current = {\r\n                    distance: pinchState.current.distance,\r\n                    origin: origin,\r\n                };\r\n                state.current = {\r\n                    scale: state.current.scale,\r\n                    translate: addPoints(state.current.translate, originDiff),\r\n                };\r\n            }\r\n        },\r\n        onPinchStart: function (_a) {\r\n            var distance = _a.da[0], origin = _a.origin;\r\n            pinchState.current = {\r\n                distance: distance,\r\n                origin: origin,\r\n            };\r\n            active.current = true;\r\n        },\r\n        onPinchEnd: function () { return active.current = false; },\r\n        onWheel: function (_a) {\r\n            var _b = _a.direction, _ = _b[0], yDirection = _b[1], _c = _a.event, clientX = _c.clientX, clientY = _c.clientY;\r\n            if (props.elemToAttachTo.current) {\r\n                var factor = 0.9;\r\n                if (yDirection < 0) {\r\n                    factor = 1 / factor;\r\n                }\r\n                var newTransformation = computeTransformationOnScale(props.elemToAttachTo.current, { x: clientX, y: clientY }, state.current.translate, state.current.scale, factor);\r\n                state.current = newTransformation;\r\n            }\r\n        },\r\n    }, {\r\n        domTarget: props.elemToAttachTo,\r\n        eventOptions: { passive: false },\r\n        pinch: { enabled: !!props.enableZoom },\r\n        wheel: { enabled: !!props.enableZoom },\r\n    });\r\n    useEffect(function () {\r\n        var _a, _b;\r\n        if (!active.current) {\r\n            return;\r\n        }\r\n        var body = (_b = (_a = props.elemToAttachTo.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.body;\r\n        if (!body) {\r\n            return;\r\n        }\r\n        body.classList.add('react_fast_diagram_disabled_user_select');\r\n        return function () {\r\n            body.classList.remove('react_fast_diagram_disabled_user_select');\r\n        };\r\n    }, [active.current]);\r\n    return {\r\n        transform: generateTransform(state.current.translate, props.enableZoom ? state.current.scale : undefined),\r\n        scale: state.current.scale,\r\n        translate: state.current.translate,\r\n    };\r\n};\r\n//# sourceMappingURL=useDragAndZoom.js.map","import { atom, DefaultValue, selector } from 'recoil';\r\nimport { libraryPrefix } from './common';\r\nexport var diagramTranslateState = atom({\r\n    key: libraryPrefix + \"_DiagramTranslate\",\r\n    default: {\r\n        x: 0,\r\n        y: 0,\r\n    },\r\n});\r\nexport var diagramScaleState = atom({\r\n    key: libraryPrefix + \"_DiagramScale\",\r\n    default: 1,\r\n});\r\nexport var diagramTransformationState = selector({\r\n    key: libraryPrefix + \"_DiagramTransformation\",\r\n    get: function (_a) {\r\n        var get = _a.get;\r\n        var scale = get(diagramScaleState);\r\n        var translate = get(diagramTranslateState);\r\n        return { scale: scale, translate: translate };\r\n    },\r\n    set: function (_a, newValue) {\r\n        var get = _a.get, set = _a.set;\r\n        if (newValue instanceof DefaultValue) {\r\n        }\r\n        else {\r\n            set(diagramScaleState, newValue.scale);\r\n            set(diagramTranslateState, newValue.translate);\r\n        }\r\n    }\r\n});\r\nexport var diagramSettingsState = atom({\r\n    key: libraryPrefix + \"_DiagramSettings\",\r\n    default: {\r\n        readonly: false\r\n    },\r\n});\r\n//# sourceMappingURL=diagramState.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { useEffect } from 'react';\r\nimport { useRecoilCallback } from 'recoil';\r\nimport { useNodeState } from '../hooks/nodeHooks';\r\nimport { useDragAndZoom } from '../hooks/useDragAndZoom';\r\nimport { useNotifyRef } from '../hooks/useNotifyRef';\r\nimport { diagramScaleState } from '../states/diagramState';\r\nexport var Node = function (props) {\r\n    var _a = useNodeState(props.id), node = _a[0], setNode = _a[1];\r\n    var nodeRef = useNotifyRef(null);\r\n    var nodeHasRef = !!node.ref;\r\n    useEffect(function () {\r\n        setNode(function (curValue) { return (__assign(__assign({}, curValue), { ref: nodeRef })); });\r\n    }, [nodeRef, nodeHasRef]);\r\n    var getScale = useRecoilCallback(function (_a) {\r\n        var snapshot = _a.snapshot;\r\n        return function () {\r\n            var scaleState = snapshot.getLoadable(diagramScaleState).contents;\r\n            return typeof scaleState === 'number' ? scaleState : 1;\r\n        };\r\n    });\r\n    var _b = useDragAndZoom({\r\n        elemToAttachTo: nodeRef,\r\n        parentScale: getScale(),\r\n        initTranslate: node.position\r\n    }), transform = _b.transform, translate = _b.translate;\r\n    useEffect(function () {\r\n        setNode(function (currentNode) {\r\n            return __assign(__assign({}, currentNode), { position: translate });\r\n        });\r\n    }, [translate]);\r\n    return (React.createElement(\"div\", { id: node.id, className: 'react_fast_diagram_Node react_fast_diagram_Node_Default', style: {\r\n            transform: transform,\r\n        }, ref: nodeRef },\r\n        React.createElement(\"div\", { style: {\r\n                textAlign: 'center',\r\n                margin: 'auto',\r\n            } }, props.id)));\r\n};\r\nexport var NodeMemo = React.memo(Node);\r\n//# sourceMappingURL=Node.js.map","import React from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport { nodesIdsState } from '../states/nodeState';\r\nimport { NodeMemo } from './Node';\r\nvar NodesLayer = function () {\r\n    var nodes = useRecoilState(nodesIdsState)[0];\r\n    return (React.createElement(\"div\", null, nodes.map(function (id) { return (React.createElement(NodeMemo, { key: id, id: id })); })));\r\n};\r\nexport var NodesLayerMemorized = React.memo(NodesLayer);\r\n//# sourceMappingURL=NodesLayer.js.map","import React, { forwardRef, useEffect, useImperativeHandle } from 'react';\r\nimport { useRecoilCallback, useSetRecoilState } from 'recoil';\r\nimport { LinksLayerMemorized } from './LinksLayer';\r\nimport { NodesLayerMemorized } from './NodesLayer';\r\nimport { diagramScaleState, } from '../states/diagramState';\r\nimport { initializeState } from './Diagram';\r\nimport '../Diagram.css';\r\nimport { nodesIdsState, nodeWithIdState } from '../states/nodeState';\r\nimport { linksIdsState, linkWithIdState } from '../states/linkState';\r\nimport { useNotifyRef } from '../hooks/useNotifyRef';\r\nimport { useDragAndZoom } from '../hooks/useDragAndZoom';\r\nexport var InnerDiagram = forwardRef(function (_props, ref) {\r\n    var movableElementRef = useNotifyRef(null);\r\n    var setScale = useSetRecoilState(diagramScaleState);\r\n    var _a = useDragAndZoom({\r\n        elemToAttachTo: movableElementRef,\r\n        enableZoom: true,\r\n        listenOnlyClass: 'react_fast_diagram_DiagramInner',\r\n    }), transform = _a.transform, scale = _a.scale;\r\n    useEffect(function () {\r\n        setScale(scale);\r\n    }, [scale]);\r\n    var addNode = useRecoilCallback(function (_a) {\r\n        var set = _a.set;\r\n        return function (newNode) {\r\n            set(nodeWithIdState(newNode.id), newNode);\r\n            set(nodesIdsState, function (v) { return v.concat([newNode.id]); });\r\n        };\r\n    });\r\n    var reinitState = useRecoilCallback(function (_a) {\r\n        var snapshot = _a.snapshot, gotoSnapshot = _a.gotoSnapshot;\r\n        return function (initializer) {\r\n            gotoSnapshot(snapshot.map(function (m) {\r\n                var nodeIds = m.getLoadable(nodesIdsState).contents;\r\n                if (Array.isArray(nodeIds)) {\r\n                    nodeIds.forEach(function (id) { return m.reset(nodeWithIdState(id)); });\r\n                }\r\n                var linksIds = m.getLoadable(linksIdsState).contents;\r\n                if (Array.isArray(linksIds)) {\r\n                    linksIds.forEach(function (id) { return m.reset(linkWithIdState(id)); });\r\n                }\r\n                initializeState(m, initializer);\r\n            }));\r\n        };\r\n    });\r\n    useImperativeHandle(ref, function () { return ({\r\n        addNode: addNode,\r\n        reinitState: reinitState,\r\n    }); }, []);\r\n    return (React.createElement(\"div\", { ref: movableElementRef, style: { touchAction: 'none' }, className: 'react_fast_diagram_DiagramInner' },\r\n        React.createElement(\"div\", { className: 'react_fast_diagram_Movable', style: {\r\n                transform: transform,\r\n            } },\r\n            React.createElement(LinksLayerMemorized, null),\r\n            React.createElement(NodesLayerMemorized, null))));\r\n});\r\nInnerDiagram.displayName = 'InnerDiagram';\r\n//# sourceMappingURL=DiagramInner.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { forwardRef } from 'react';\r\nimport { RecoilRoot } from 'recoil';\r\nimport { InnerDiagram } from './DiagramInner';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { nodesIdsState, nodeWithIdState } from '../states/nodeState';\r\nimport { linksIdsState, linkWithIdState } from '../states/linkState';\r\nexport var initializeState = function (snap, initializer) {\r\n    if (initializer) {\r\n        initializer.nodes.forEach(function (node) {\r\n            snap.set(nodeWithIdState(node.id), node);\r\n        });\r\n        snap.set(nodesIdsState, initializer.nodes.map(function (node) { return node.id; }));\r\n        var linksIds_1 = [];\r\n        initializer.links.forEach(function (linkOriginal) {\r\n            var _a;\r\n            var link = __assign({ type: 'simple', id: (_a = linkOriginal.id) !== null && _a !== void 0 ? _a : uuidv4() }, linkOriginal);\r\n            linksIds_1.push(link.id);\r\n            snap.set(linkWithIdState(link.id), link);\r\n        });\r\n        snap.set(linksIdsState, linksIds_1);\r\n    }\r\n};\r\nexport var Diagram = forwardRef(function (props, ref) {\r\n    var initializeStateWrapper = function (snap) {\r\n        return initializeState(snap, props.initialState);\r\n    };\r\n    return (React.createElement(RecoilRoot, { initializeState: initializeStateWrapper },\r\n        React.createElement(InnerDiagram, { ref: ref })));\r\n});\r\nDiagram.displayName = 'Diagram';\r\n//# sourceMappingURL=Diagram.js.map","import { useNotifyRef } from \"./useNotifyRef\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { diagramSettingsState } from \"../states/diagramState\";\r\nexport var useDiagramRef = function () { return useNotifyRef(null); };\r\nexport var useDiagramSettingsState = function () { return useRecoilState(diagramSettingsState); };\r\n//# sourceMappingURL=diagramHooks.js.map","import React, { useState } from 'react';\r\nimport type { DiagramApi, DiagramInitializer, NodeState } from '@react-easy-diagram/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Tune } from '@material-ui/icons';\r\nimport Card from '@material-ui/core/Card';\r\nimport { Box, Button, TextField, Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '7px',\r\n  },\r\n  visibilityBtn: {\r\n    borderRadius: '25px',\r\n    minWidth: '24px',\r\n    padding: '8px 8px',\r\n    backgroundColor: 'white',\r\n  },\r\n  header: {\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '14px',\r\n  },\r\n}));\r\n\r\nconst generateLargeDiagram = (colNum: number, rowNum: number): DiagramInitializer => {\r\n  const nodes = [];\r\n  const links = [];\r\n  const getNodeId = (i: number,j: number) => `node_${i}_${j}`;\r\n\r\n  for (let i = 0; i < colNum; i++) {\r\n    for (let j = 0; j < rowNum; j++) {\r\n      nodes.push({\r\n        id: getNodeId(i,j),\r\n        position: { x: i * 120, y: j * 120 },\r\n      });\r\n      if (i - 1 >= 0) {\r\n        links.push({\r\n          source: {\r\n            nodeId: getNodeId(i - 1,j)\r\n          },\r\n          target: {\r\n            nodeId: getNodeId(i,j)\r\n          }\r\n        });\r\n      }\r\n      if (j - 1 >= 0) {\r\n        links.push({\r\n          source: {\r\n            nodeId: getNodeId(i,j - 1)\r\n          },\r\n          target: {\r\n            nodeId: getNodeId(i,j)\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return {nodes,links};\r\n};\r\n\r\nexport interface ControlPanelProps{\r\n  reinitState?(initializer: DiagramInitializer): void;\r\n}\r\n\r\nexport const ControlPanel = (props: ControlPanelProps) => {\r\n  const classes = useStyles();\r\n\r\n  const [row, setRow] = useState(10);\r\n  const [col, setCol] = useState(10);\r\n\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  const onFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    if (props.reinitState) {\r\n      props.reinitState(generateLargeDiagram(row, col));\r\n    }\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  if (visible) {\r\n    return (\r\n      <Box padding={3} clone>\r\n        <Card>\r\n          <div className={classes.header}>\r\n            <Button\r\n              className={classes.visibilityBtn}\r\n              variant='outlined'\r\n              aria-label='control-panel'\r\n              onClick={() => setVisible(false)}\r\n            >\r\n              <Tune />\r\n            </Button>\r\n            <Typography variant='h5'>Control Panel</Typography>\r\n          </div>\r\n          <form\r\n            className={classes.form}\r\n            noValidate\r\n            autoComplete='off'\r\n            onSubmit={onFormSubmit}\r\n          >\r\n            <TextField\r\n              id='rows'\r\n              value={row}\r\n              type='number'\r\n              label='Rows'\r\n              variant='outlined'\r\n              onChange={(e) => setRow(parseInt(e.target.value))}\r\n            />\r\n            <TextField\r\n              id='columns'\r\n              value={col}\r\n              type='number'\r\n              label='Columns'\r\n              variant='outlined'\r\n              onChange={(e) => setCol(parseInt(e.target.value))}\r\n            />\r\n            <Button variant='contained' type='submit'>\r\n              Generate new Diagram\r\n            </Button>\r\n          </form>\r\n        </Card>\r\n      </Box>\r\n    );\r\n  } else {\r\n    return (\r\n      <Button\r\n        variant='outlined'\r\n        className={classes.visibilityBtn}\r\n        aria-label='control-panel'\r\n        onClick={() => setVisible(true)}\r\n      >\r\n        <Tune />\r\n      </Button>\r\n    );\r\n  }\r\n};\r\n","import React from 'react';\r\nimport './App.css';\r\nimport {\r\n  Diagram,\r\n  DiagramInitializer,\r\n  useDiagramRef,\r\n} from '@react-easy-diagram/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { ControlPanel } from './ControlPanel';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  diagram: {\r\n    height: '100vh',\r\n    width: '100vw',\r\n    backgroundColor: '#dbdbdb',\r\n    backgroundImage:\r\n      \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.3'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\\\")\",\r\n  },\r\n  controlPanel: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    left: '20px',\r\n  },\r\n}));\r\n\r\nexport const App = () => {\r\n  const classes = useStyles();\r\n  const diagramRef = useDiagramRef();\r\n\r\n  return (\r\n    <Box className={classes.diagram}>\r\n      <Diagram ref={diagramRef} initialState={initDiagram} />\r\n      <Box className={classes.controlPanel}>\r\n        <ControlPanel reinitState={diagramRef.current?.reinitState} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst initDiagram: DiagramInitializer = {\r\n  nodes: [\r\n    {\r\n      id: 'Node 1',\r\n      position: {\r\n        x: 300,\r\n        y: 300,\r\n      },\r\n    },\r\n    {\r\n      id: 'Node 2',\r\n      position: {\r\n        x: 520,\r\n        y: 400,\r\n      },\r\n    },\r\n    {\r\n      id: 'Node 3',\r\n      position: {\r\n        x: 520,\r\n        y: 200,\r\n      },\r\n    },\r\n  ],\r\n  links: [\r\n    {\r\n      source: {\r\n        nodeId: 'Node 2'\r\n      },\r\n      target: {\r\n        nodeId: 'Node 1'\r\n      }\r\n    }\r\n  ]\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}