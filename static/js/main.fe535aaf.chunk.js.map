{"version":3,"sources":["../../../src/hooks/useNotifyRef.ts","../../../src/components/LinkWrapper.tsx","../../../src/components/LinksLayer.tsx","../../../src/hooks/useRootStore.ts","../../../../src/hooks/userInteractions/useDragHandlers.ts","../../../../src/hooks/userInteractions/useUserAbilityToSelectSwitcher.ts","../../../../src/hooks/userInteractions/useNodeUserInteraction.ts","../../../src/components/NodeWrapper.tsx","../../../../src/hooks/userInteractions/common.ts","../../../src/components/NodesLayer.tsx","../../src/utils.ts","../../../../src/hooks/userInteractions/useDiagramUserInteraction.ts","../../../../src/hooks/userInteractions/usePinchHandlers.ts","../../../../src/hooks/userInteractions/useWheelHandler.ts","../../../src/components/BackgroundWrapper.tsx","../../../src/components/DiagramInner.tsx","../../../src/states/diagramApi.ts","../../../src/components/BackgroundDefault.tsx","../../../src/states/diagramsSettings.ts","../../../src/states/diagramState.ts","../../../src/components/LinkDefault.tsx","../../../src/types/common.ts","../../../src/states/visualComponents.ts","../../../src/linkConstructors/curved.ts","../../../src/states/linksSettings.ts","../../../src/states/linkEndpointState.ts","../../../src/states/linkState.ts","../../../src/states/linkCreationState.ts","../../../src/states/linksStore.ts","../../../src/components/NodeDefault.tsx","../../../src/states/nodesSettings.ts","../../../src/states/htmlElementRefState.ts","../../../src/states/portState.ts","../../../src/states/nodeState.ts","../../../src/states/nodesStore.ts","../../../src/components/PortWrapper.tsx","../../../../src/hooks/userInteractions/usePortUserInteraction.ts","../../../src/components/PortsContainerDefault.tsx","../../../src/states/portsSettings.ts","../../../src/states/rootStore.ts","../../../src/components/Diagram.tsx","ControlPanel.tsx","App.tsx","../../../src/hooks/useDiagram.tsx","index.tsx"],"names":["this","a","LinkCreationState","prototype","rectJson","className","useStyles","makeStyles","form","display","flexDirection","margin","visibilityBtn","borderRadius","minWidth","padding","backgroundColor","header","marginBottom","alignItems","ControlPanel","props","classes","useState","row","setRow","col","setCol","visible","setVisible","Box","clone","Card","Button","variant","aria-label","onClick","Tune","Typography","noValidate","autoComplete","onSubmit","e","preventDefault","reinitState","newState","colNum","rowNum","nodes","links","getNodeId","i","j","push","id","position","ports","left","type","top","right","bottom","source","nodeId","portId","target","generateLargeDiagram","TextField","value","label","onChange","parseInt","diagram","height","width","controlPanel","App","useDiagram","initState","components","default","createLinkDefault","attention","color","pathConstructor","createCurvedLinkPathConstructor","Diagram","apiRef","current","componentType","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fe535aaf.chunk.js","sourcesContent":["import { useState } from 'react';\r\nexport var useNotifyRef = function (init) {\r\n    var _a = useState(0), _ = _a[0], forceUpdate = _a[1];\r\n    var ref = useState(function () { return ({\r\n        value: init,\r\n        facade: {\r\n            get current() {\r\n                return ref.value;\r\n            },\r\n            set current(value) {\r\n                var last = ref.value;\r\n                if (last !== value) {\r\n                    ref.value = value;\r\n                    forceUpdate(function (i) { return i + 1; });\r\n                }\r\n            },\r\n        },\r\n    }); })[0];\r\n    return ref.facade;\r\n};\r\n//# sourceMappingURL=useNotifyRef.js.map","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { useNotifyRef } from '../hooks/useNotifyRef';\r\nexport var LinkWrapper = observer(function (_a) {\r\n    var link = _a.link;\r\n    var draggableRef = useNotifyRef(null);\r\n    var Component = link.componentDefinition.component;\r\n    return (React.createElement(\"g\", null,\r\n        React.createElement(Component, { draggableRef: draggableRef, path: link.path, entity: link, settings: link.componentDefinition.settings })));\r\n});\r\n//# sourceMappingURL=LinkWrapper.js.map","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { LinkWrapper } from './LinkWrapper';\r\nexport var LinksLayer = observer(function (_a) {\r\n    var linksStore = _a.linksStore;\r\n    return (React.createElement(\"svg\", null,\r\n        Object.values(linksStore.links).map(function (link) { return (React.createElement(LinkWrapper, { key: link.id, link: link })); }),\r\n        linksStore.linkCreation.link && React.createElement(LinkWrapper, { key: linksStore.linkCreation.link.id, link: linksStore.linkCreation.link })));\r\n});\r\n//# sourceMappingURL=LinksLayer.js.map","import { useContext } from \"react\";\r\nimport { RootStoreContext } from \"../components/Diagram\";\r\nexport var useRootStore = function () { return useContext(RootStoreContext); };\r\n//# sourceMappingURL=useRootStore.js.map","import { useMemo } from 'react';\r\nexport function useDragHandlers(activeRef, state, parentScaleGetter, cancel) {\r\n    var handlers = useMemo(function () { return ({\r\n        onDrag: function (_a) {\r\n            var pinching = _a.pinching, delta = _a.delta;\r\n            if (!activeRef.current || pinching) {\r\n                return;\r\n            }\r\n            var parentScale = parentScaleGetter ? parentScaleGetter() : 1;\r\n            state.setOffset([\r\n                state.offset[0] + delta[0] / parentScale,\r\n                state.offset[1] + delta[1] / parentScale,\r\n            ]);\r\n        },\r\n        onDragStart: function (_a) {\r\n            var event = _a.event;\r\n            if (cancel && cancel(event)) {\r\n                return;\r\n            }\r\n            activeRef.current = true;\r\n        },\r\n        onDragEnd: function () { return (activeRef.current = false); },\r\n    }); }, [activeRef, state, parentScaleGetter, cancel]);\r\n    return handlers;\r\n}\r\n//# sourceMappingURL=useDragHandlers.js.map","import { useEffect } from \"react\";\r\nexport var DISABLED_USER_SELECT_CSS_CLASS = 'react_fast_diagram_disabled_user_select';\r\nexport function useUserAbilityToSelectSwitcher(active, elementToSwitchUserSelectOn) {\r\n    useEffect(function () {\r\n        if (!active || !elementToSwitchUserSelectOn) {\r\n            return;\r\n        }\r\n        if (elementToSwitchUserSelectOn.classList.contains(DISABLED_USER_SELECT_CSS_CLASS)) {\r\n            return;\r\n        }\r\n        elementToSwitchUserSelectOn.classList.add(DISABLED_USER_SELECT_CSS_CLASS);\r\n        return function () {\r\n            elementToSwitchUserSelectOn.classList.remove(DISABLED_USER_SELECT_CSS_CLASS);\r\n        };\r\n    }, [active, elementToSwitchUserSelectOn]);\r\n}\r\n//# sourceMappingURL=useUserAbilityToSelectSwitcher.js.map","import { useRef } from 'react';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { useNotifyRef } from '../useNotifyRef';\r\nimport { useRootStore } from '../useRootStore';\r\nimport { eventPathContainsClass } from './common';\r\nimport { useDragHandlers } from './useDragHandlers';\r\nimport { useUserAbilityToSelectSwitcher } from './useUserAbilityToSelectSwitcher';\r\nexport var useNodeUserInteraction = function (nodeState, enable) {\r\n    var _a, _b;\r\n    var diagramStore = useRootStore().diagramState;\r\n    // Should trigger rendering on change, otherwise useUserSelectSwitcher will not be invoked\r\n    var activeRef = useNotifyRef(false);\r\n    var userInteractionElemRef = useRef(null);\r\n    var dragHandlers = useDragHandlers(activeRef, nodeState, function () { return diagramStore.zoom; }, function (e) {\r\n        return eventPathContainsClass(e, 'react_fast_diagram_PortWrapper');\r\n    });\r\n    useGesture(dragHandlers, {\r\n        domTarget: userInteractionElemRef,\r\n        eventOptions: { passive: false },\r\n        enabled: enable,\r\n    });\r\n    useUserAbilityToSelectSwitcher(activeRef.current, (_b = (_a = userInteractionElemRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.body);\r\n    return {\r\n        active: activeRef.current,\r\n        userInteractionElemRef: userInteractionElemRef,\r\n    };\r\n};\r\n//# sourceMappingURL=useNodeUserInteraction.js.map","import React from 'react';\r\nimport { useNodeUserInteraction } from '../hooks/userInteractions/useNodeUserInteraction';\r\nimport { observer } from 'mobx-react-lite';\r\nexport var NodeWrapper = observer(function (_a) {\r\n    var node = _a.node;\r\n    var userInteractionElemRef = useNodeUserInteraction(node).userInteractionElemRef;\r\n    return (React.createElement(\"div\", { id: node.id, className: 'react_fast_diagram_NodeWrapper', style: {\r\n            left: node.offset[0],\r\n            top: node.offset[1]\r\n        }, ref: node.ref },\r\n        React.createElement(node.componentDefinition.component, { draggableRef: userInteractionElemRef, entity: node, settings: node.componentDefinition.settings })));\r\n});\r\n//# sourceMappingURL=NodeWrapper.js.map","export var eventPathContainsClass = function (event, className) {\r\n    var typedEvent = event;\r\n    if ('composedPath' in typedEvent) {\r\n        var targets = typedEvent.composedPath();\r\n        for (var i = 0; i < targets.length; i++) {\r\n            var target = targets[i];\r\n            if ('classList' in target) {\r\n                if (target.classList.contains(className)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\nexport function allTouchTargetsContainsClass(event, listenOnlyClass, ignoreClass) {\r\n    for (var i = 0; i < event.touches.length; i++) {\r\n        if (!eventTargetContainsClass(event.touches[i].target, listenOnlyClass, ignoreClass)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function eventTargetContainsClass(eventTarget, listenOnlyClass, ignoreClass) {\r\n    if (eventTarget && 'classList' in eventTarget) {\r\n        var targetElement = eventTarget;\r\n        return ((!listenOnlyClass || targetElement.classList.contains(listenOnlyClass)) &&\r\n            (!ignoreClass || !targetElement.classList.contains(ignoreClass)));\r\n    }\r\n    else\r\n        return false;\r\n}\r\n//# sourceMappingURL=common.js.map","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { NodeWrapper } from './NodeWrapper';\r\nexport var NodesLayer = observer(function (_a) {\r\n    var nodesStore = _a.nodesStore;\r\n    return (React.createElement(\"div\", null, Object.values(nodesStore.nodes).map(function (node) { return (React.createElement(NodeWrapper, { key: node.id, node: node })); })));\r\n});\r\n//# sourceMappingURL=NodesLayer.js.map","export var generateTransform = function (translate, scale) {\r\n    var translatePart = \"translate(\" + translate[0] + \"px, \" + translate[1] + \"px)\";\r\n    if (scale) {\r\n        var scalePart = \"scale(\" + scale + \")\";\r\n        return translatePart + ' ' + scalePart;\r\n    }\r\n    else {\r\n        return translatePart;\r\n    }\r\n};\r\nvar MIN_SCALE = 0.1;\r\nvar MAX_SCALE = 3;\r\n// See: https://stackoverflow.com/a/30039971/9142642\r\nexport var computeTransformationOnScale = function (target, midpoint, translate, scale, factor) {\r\n    factor = clampFactorForTransformation(factor, scale);\r\n    // The upper left corner of the target stays in the same place while the picture is enlarged\r\n    var rect = target.getBoundingClientRect();\r\n    // Get mouse position related to target\r\n    var mouseXPos = midpoint[0] - rect.left;\r\n    var mouseYPos = midpoint[1] - rect.top;\r\n    // Now consider the point under the mouse cursor. Every pixel above and to the\r\n    // left of the cursor has become *factor* larger. This displaces the point under the\r\n    // cursor by *factor* downward and to the right. Meanwhile, the cursor is in the same position.\r\n    // Note that the target might have been moved in the canvas before the zooming operation, so the\r\n    // cursor's horizontal position in the target is mouseXPos - transformation.translation.x before zooming,\r\n    // and likewise for the vertical position.\r\n    var dx = (mouseXPos - translate[0]) * (factor - 1);\r\n    var dy = (mouseYPos - translate[1]) * (factor - 1);\r\n    return {\r\n        scale: clampValue(scale * factor, MIN_SCALE, MAX_SCALE),\r\n        position: [\r\n            // Compensate for the displacement by moving the point back under the cursor\r\n            translate[0] - dx,\r\n            translate[1] - dy,\r\n        ],\r\n    };\r\n};\r\nfunction clampFactorForTransformation(factor, currentScale) {\r\n    if (currentScale * factor < MIN_SCALE) {\r\n        return MIN_SCALE / currentScale;\r\n    }\r\n    else if (currentScale * factor > MAX_SCALE) {\r\n        return MAX_SCALE / currentScale;\r\n    }\r\n    else\r\n        return factor;\r\n}\r\nexport var distanceBetweenPoints = function (a, b) { return (Math.sqrt(Math.pow((a[0] - b[0]), 2) + Math.pow((a[1] - b[1]), 2))); };\r\nexport var roundPoint = function (point) { return [\r\n    Math.round(point[0]),\r\n    Math.round(point[1]),\r\n]; };\r\nexport var addPoints = function (a, b) { return ([\r\n    a[0] + b[0],\r\n    a[1] + b[1],\r\n]); };\r\nexport var subtractPoints = function (a, b) { return ([\r\n    a[0] - b[0],\r\n    a[1] - b[1],\r\n]); };\r\nexport var multiplyPoint = function (a, m) { return ([\r\n    a[0] * m,\r\n    a[1] * m,\r\n]); };\r\nexport var arePointsEqual = function (a, b) {\r\n    return a === b || (a && b && a[0] === b[0] && a[1] === b[1]);\r\n};\r\nexport var areTranformationsEqual = function (a, b) {\r\n    return a === b ||\r\n        (a && b && a.scale === b.scale && arePointsEqual(a.position, b.position));\r\n};\r\nexport function clampValue(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n//# sourceMappingURL=utils.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { useCallback, useRef } from 'react';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { useNotifyRef } from '../useNotifyRef';\r\nimport { useRootStore } from '../useRootStore';\r\nimport { useDragHandlers } from './useDragHandlers';\r\nimport { usePinchHandlers } from './usePinchHandlers';\r\nimport { useUserAbilityToSelectSwitcher } from './useUserAbilityToSelectSwitcher';\r\nimport { useWheelHandler } from './useWheelHandler';\r\nexport var useDiagramUserInteraction = function (enable) {\r\n    var _a, _b;\r\n    var diagramStore = useRootStore().diagramState;\r\n    var activeRef = useNotifyRef(false);\r\n    var userInteractionElemRef = useRef(null);\r\n    var cancelGesture = useCallback(function (event) { return event.target !== userInteractionElemRef.current; }, [userInteractionElemRef]);\r\n    var dragHandlers = useDragHandlers(activeRef, diagramStore, undefined, cancelGesture);\r\n    var pinchHandlers = usePinchHandlers(userInteractionElemRef, activeRef, diagramStore, cancelGesture);\r\n    var wheelHandler = useWheelHandler(userInteractionElemRef, activeRef, diagramStore);\r\n    useGesture(__assign(__assign(__assign({}, dragHandlers), pinchHandlers), wheelHandler), {\r\n        domTarget: userInteractionElemRef,\r\n        eventOptions: { passive: false },\r\n        enabled: enable,\r\n    });\r\n    useUserAbilityToSelectSwitcher(activeRef.current, (_b = (_a = userInteractionElemRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.body);\r\n    return {\r\n        userInteractionElemRef: userInteractionElemRef,\r\n        transform: diagramStore.transformString,\r\n        active: activeRef.current,\r\n    };\r\n};\r\n//# sourceMappingURL=useDiagramUserInteraction.js.map","import { useMemo, useRef } from 'react';\r\nimport { addPoints, computeTransformationOnScale, subtractPoints, } from '../../utils';\r\nexport function usePinchHandlers(elemToAttachToRef, activeRef, state, cancel) {\r\n    var pinchState = useRef({\r\n        distance: 0,\r\n        origin: [0, 0],\r\n    });\r\n    var handlers = useMemo(function () { return ({\r\n        onPinch: function (_a) {\r\n            var distance = _a.da[0], origin = _a.origin;\r\n            if (!activeRef.current || !elemToAttachToRef.current) {\r\n                return;\r\n            }\r\n            var originDiff = subtractPoints(origin, pinchState.current.origin);\r\n            var diff = distance - pinchState.current.distance;\r\n            var elWidth = elemToAttachToRef.current.clientWidth * state.zoom;\r\n            var targetElWidth = elWidth + diff;\r\n            var factor = targetElWidth / elWidth;\r\n            var scaleTransformation = computeTransformationOnScale(elemToAttachToRef.current, origin, addPoints(state.offset, originDiff), state.zoom, factor);\r\n            pinchState.current = {\r\n                distance: distance,\r\n                origin: origin,\r\n            };\r\n            state.setTransformation(scaleTransformation.position, scaleTransformation.scale);\r\n        },\r\n        onPinchStart: function (_a) {\r\n            var distance = _a.da[0], origin = _a.origin, event = _a.event;\r\n            if (cancel && cancel(event)) {\r\n                return;\r\n            }\r\n            pinchState.current = {\r\n                distance: distance,\r\n                origin: origin,\r\n            };\r\n            activeRef.current = true;\r\n        },\r\n        onPinchEnd: function () { return (activeRef.current = false); },\r\n    }); }, [elemToAttachToRef, activeRef, state, cancel]);\r\n    return handlers;\r\n}\r\n//# sourceMappingURL=usePinchHandlers.js.map","import { useMemo } from 'react';\r\nimport { computeTransformationOnScale } from '../../utils';\r\nexport function useWheelHandler(elemToAttachToRef, activeRef, state) {\r\n    var handlers = useMemo(function () { return ({\r\n        onWheel: function (_a) {\r\n            var _b = _a.direction, _ = _b[0], yDirection = _b[1], _c = _a.event, clientX = _c.clientX, clientY = _c.clientY;\r\n            if (elemToAttachToRef.current) {\r\n                var factor = 0.9;\r\n                if (yDirection < 0) {\r\n                    factor = 1 / factor;\r\n                }\r\n                var newTransformation = computeTransformationOnScale(elemToAttachToRef.current, [clientX, clientY], state.offset, state.zoom, factor);\r\n                state.setTransformation(newTransformation.position, newTransformation.scale);\r\n            }\r\n        },\r\n    }); }, [elemToAttachToRef, activeRef, state]);\r\n    return handlers;\r\n}\r\n//# sourceMappingURL=useWheelHandler.js.map","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { useRootStore } from '../hooks/useRootStore';\r\nexport var BackgroundWrapper = observer(function () {\r\n    var _a = useRootStore(), diagramSettings = _a.diagramSettings, diagramState = _a.diagramState;\r\n    return (React.createElement(\"div\", { className: 'react_fast_diagram_BackgroundWrapper' },\r\n        React.createElement(diagramSettings.backgroundComponent.component, { diagramOffset: diagramState.offset, digramZoom: diagramState.zoom, settings: diagramSettings.backgroundComponent.settings })));\r\n});\r\n//# sourceMappingURL=BackgroundWrapper.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from 'react';\r\nimport { LinksLayer } from './LinksLayer';\r\nimport { NodesLayer } from './NodesLayer';\r\nimport { useDiagramUserInteraction } from '../hooks/userInteractions/useDiagramUserInteraction';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { useRootStore } from '../hooks/useRootStore';\r\nimport { BackgroundWrapper } from './BackgroundWrapper';\r\nexport var InnerDiagram = observer(function (props) {\r\n    var rootStore = useRootStore();\r\n    var _a = useDiagramUserInteraction(), transform = _a.transform, userInteractionElemRef = _a.userInteractionElemRef;\r\n    return (React.createElement(\"div\", { ref: userInteractionElemRef, style: __assign({}, props.diagramStyles), className: 'react_fast_diagram_DiagramInner' },\r\n        React.createElement(BackgroundWrapper, null),\r\n        React.createElement(\"div\", { className: 'react_fast_diagram_DiagramInner_DraggablePart', style: {\r\n                transform: transform,\r\n            } },\r\n            React.createElement(LinksLayer, { linksStore: rootStore.linksStore }),\r\n            React.createElement(NodesLayer, { nodesStore: rootStore.nodesStore }))));\r\n});\r\nInnerDiagram.displayName = 'InnerDiagram';\r\n//# sourceMappingURL=DiagramInner.js.map","var DiagramApi = /** @class */ (function () {\r\n    function DiagramApi(rootStore) {\r\n        var _this = this;\r\n        this.addNode = function (node) {\r\n            _this.rootStore.nodesStore.addNode(node);\r\n        };\r\n        this.reinitState = function (nodes, links) {\r\n            _this.rootStore.nodesStore.fromJson(nodes);\r\n            _this.rootStore.linksStore.fromJson(links);\r\n        };\r\n        this.reinitSettings = function (settings) {\r\n            settings.nodes && _this.rootStore.nodesSettings.fromJson(settings.nodes);\r\n            settings.links && _this.rootStore.linksSettings.fromJson(settings.links);\r\n        };\r\n        this.rootStore = rootStore;\r\n    }\r\n    return DiagramApi;\r\n}());\r\nexport { DiagramApi };\r\n//# sourceMappingURL=diagramApi.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from 'react';\r\nvar BackgroundDefault = function (_a) {\r\n    var diagramOffset = _a.diagramOffset, digramZoom = _a.digramZoom, settings = _a.settings;\r\n    settings = settings !== null && settings !== void 0 ? settings : defaultSettings;\r\n    return (React.createElement(\"div\", { className: 'react_fast_diagram_Background_Default', style: {\r\n            backgroundColor: settings.color,\r\n            backgroundImage: settings.imageCreator(100 * digramZoom, 100 * digramZoom),\r\n            backgroundPosition: diagramOffset[0] + \"px \" + diagramOffset[1] + \"px\",\r\n        } }));\r\n};\r\nexport var createGridImage = function (width, height) {\r\n    return \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='\" + width + \"' height='\" + height + \"' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.3'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\\\")\";\r\n};\r\nvar defaultSettings = {\r\n    imageCreator: createGridImage,\r\n    color: '#ececec',\r\n};\r\nexport var createDefaultBackground = function (settings) {\r\n    var finaleSettings = __assign(__assign({}, defaultSettings), (settings ? settings : {}));\r\n    return {\r\n        component: BackgroundDefault,\r\n        settings: finaleSettings,\r\n    };\r\n};\r\n//# sourceMappingURL=BackgroundDefault.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { createDefaultBackground } from '../components/BackgroundDefault';\r\nvar DiagramsSettings = /** @class */ (function () {\r\n    function DiagramsSettings() {\r\n        this.backgroundComponent = createDefaultBackground();\r\n        makeAutoObservable(this);\r\n    }\r\n    return DiagramsSettings;\r\n}());\r\nexport { DiagramsSettings };\r\n//# sourceMappingURL=diagramsSettings.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { generateTransform } from '../utils';\r\nvar DiagramState = /** @class */ (function () {\r\n    function DiagramState(rootStore) {\r\n        var _this = this;\r\n        this.offset = [0, 0];\r\n        this.zoom = 1;\r\n        this.setOffset = function (newOffset) {\r\n            _this.offset = newOffset;\r\n        };\r\n        this.setTransformation = function (newOffset, newZoom) {\r\n            _this.offset = newOffset;\r\n            _this.zoom = newZoom;\r\n        };\r\n        makeAutoObservable(this);\r\n        this.rootStore = rootStore;\r\n    }\r\n    Object.defineProperty(DiagramState.prototype, \"transformString\", {\r\n        get: function () {\r\n            return generateTransform(this.offset, this.zoom);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return DiagramState;\r\n}());\r\nexport { DiagramState };\r\n//# sourceMappingURL=diagramState.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from 'react';\r\nexport var LinkDefault = function (props) {\r\n    var _a;\r\n    var settings = (_a = props.settings) !== null && _a !== void 0 ? _a : linkDefaultSettings;\r\n    return (React.createElement(\"g\", null,\r\n        React.createElement(\"path\", { ref: props.draggableRef, d: props.path, stroke: settings.color, strokeWidth: settings.strokeWidth, fill: 'none' }),\r\n        props.entity.target.hasOnlyPosition &&\r\n            React.createElement(\"circle\", { cx: props.entity.target.point[0] - settings.cirleRadius / 2, cy: props.entity.target.point[1] - settings.cirleRadius / 2, r: settings.cirleRadius, fill: 'orange' })));\r\n};\r\nvar linkDefaultSettings = {\r\n    color: 'LightBlue',\r\n    strokeWidth: 3,\r\n    cirleRadius: 5,\r\n};\r\nexport function createLinkDefault(settings) {\r\n    var finaleSettings = __assign(__assign({}, linkDefaultSettings), (settings ? settings : {}));\r\n    return {\r\n        component: LinkDefault,\r\n        settings: finaleSettings,\r\n    };\r\n}\r\n// <g>\r\n//       {/* Main line */}\r\n//       <path d={points} stroke={linkColor} strokeWidth=\"3\" fill=\"none\" />\r\n//       {/* Thick line to make selection easier */}\r\n//       <path\r\n//         d={points}\r\n//         stroke={linkColor}\r\n//         strokeWidth=\"20\"\r\n//         fill=\"none\"\r\n//         strokeLinecap=\"round\"\r\n//         strokeOpacity={isHovered || isSelected ? 0.1 : 0}\r\n//         onMouseEnter={() => onLinkMouseEnter({ config, linkId: link.id })}\r\n//         onMouseLeave={() => onLinkMouseLeave({ config, linkId: link.id })}\r\n//         onClick={(e) => {\r\n//           onLinkClick({ config, linkId: link.id })\r\n//           e.stopPropagation()\r\n//         }}\r\n//       />\r\n//     </g>\r\n//# sourceMappingURL=LinkDefault.js.map","export var componentDefaultType = 'default';\r\n//# sourceMappingURL=common.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { componentDefaultType } from '../types/common';\r\nvar VisualComponents = /** @class */ (function () {\r\n    function VisualComponents(defaultComponents) {\r\n        var _this = this;\r\n        this.defaultType = componentDefaultType;\r\n        this.fromJson = function (obj, initDefaultComponents) {\r\n            var _a;\r\n            if (initDefaultComponents === void 0) { initDefaultComponents = true; }\r\n            _this.defaultType = (_a = obj.defaultNodeType) !== null && _a !== void 0 ? _a : componentDefaultType;\r\n            if (initDefaultComponents) {\r\n                _this.initDefaultComponents();\r\n            }\r\n            else {\r\n                _this.components = {};\r\n            }\r\n            _this.addComponentsFromJson(obj.components);\r\n        };\r\n        this.getComponent = function (type) {\r\n            var _a;\r\n            var finalComponentType = type !== null && type !== void 0 ? type : _this.defaultType;\r\n            return ((_a = _this.components[finalComponentType]) !== null && _a !== void 0 ? _a : _this.components[_this.defaultType]);\r\n        };\r\n        this.defaultComponents = defaultComponents;\r\n        this.initDefaultComponents();\r\n        makeAutoObservable(this);\r\n    }\r\n    VisualComponents.prototype.initDefaultComponents = function () {\r\n        this.components = {};\r\n        this.addComponentsFromJson(this.defaultComponents);\r\n    };\r\n    VisualComponents.prototype.addComponentsFromJson = function (components) {\r\n        var _this = this;\r\n        Object.entries(components).forEach(function (_a) {\r\n            var key = _a[0], value = _a[1];\r\n            if ('component' in value) {\r\n                _this.components[key] = {\r\n                    component: observer(value.component),\r\n                    settings: value.settings,\r\n                };\r\n            }\r\n            else {\r\n                _this.components[key] = {\r\n                    component: observer(value),\r\n                };\r\n            }\r\n        });\r\n    };\r\n    return VisualComponents;\r\n}());\r\nexport { VisualComponents };\r\n//# sourceMappingURL=visualComponents.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { distanceBetweenPoints, roundPoint } from '../utils';\r\nfunction curvedLinkPathConstructor(source, target, sourcePortType, targetPortType, settings) {\r\n    if (!source || !target)\r\n        return '';\r\n    source = roundPoint(source);\r\n    target = roundPoint(target);\r\n    var sourceStr = source[0] + \", \" + source[1];\r\n    var targetStr = target[0] + \", \" + target[1];\r\n    var directionFactor = settings.tweakDirectionFactorBasedOnDistance(distanceBetweenPoints(source, target), settings.directionFactor);\r\n    function getControl(endpoint, portType) {\r\n        var linkDirection = portType && settings.portTypeToLinkDirectionMapping[portType];\r\n        switch (linkDirection) {\r\n            case 'left':\r\n                return endpoint[0] - directionFactor + \", \" + endpoint[1];\r\n            case 'up':\r\n                return endpoint[0] + \", \" + (endpoint[1] - directionFactor);\r\n            case 'right':\r\n                return endpoint[0] + directionFactor + \", \" + endpoint[1];\r\n            case 'down':\r\n                return endpoint[0] + \", \" + (endpoint[1] + directionFactor);\r\n            default:\r\n                return endpoint[0] + \", \" + endpoint[1];\r\n        }\r\n    }\r\n    if (sourcePortType || targetPortType) {\r\n        var sourceControl = getControl(source, sourcePortType);\r\n        var targetControl = getControl(target, targetPortType);\r\n        return \"M \" + sourceStr + \" C \" + sourceControl + \" \" + targetControl + \", \" + targetStr;\r\n    }\r\n    else {\r\n        return \"M \" + sourceStr + \" Q \" + target[0] + \", \" + source[1] + \", \" + targetStr;\r\n    }\r\n}\r\nvar defualtSettings = {\r\n    portTypeToLinkDirectionMapping: {\r\n        left: 'left',\r\n        right: 'right',\r\n        top: 'up',\r\n        bottom: 'down',\r\n    },\r\n    directionFactor: 60,\r\n    tweakDirectionFactorBasedOnDistance: function (distance, directionFactor) {\r\n        if (distance < 100) {\r\n            return directionFactor * (distance / 100);\r\n        }\r\n        return directionFactor;\r\n    },\r\n};\r\nexport function createCurvedLinkPathConstructor(settings) {\r\n    return function (source, target, sourcePortType, targetPortType) {\r\n        return curvedLinkPathConstructor(source, target, sourcePortType, targetPortType, settings ? __assign(__assign({}, defualtSettings), settings) : defualtSettings);\r\n    };\r\n}\r\n//# sourceMappingURL=curved.js.map","import { LinkDefault } from '../components/LinkDefault';\r\nimport { VisualComponents, } from './visualComponents';\r\nimport { makeAutoObservable } from 'mobx';\r\nimport { createCurvedLinkPathConstructor } from '../linkConstructors/curved';\r\nimport { componentDefaultType } from '../types/common';\r\nvar LinksSettings = /** @class */ (function () {\r\n    function LinksSettings() {\r\n        var _a;\r\n        var _this = this;\r\n        this.pathConstructor = createCurvedLinkPathConstructor();\r\n        this.visualComponents = new VisualComponents((_a = {},\r\n            _a[componentDefaultType] = LinkDefault,\r\n            _a));\r\n        this.fromJson = function (obj) {\r\n            _this.visualComponents.fromJson(obj);\r\n            _this.pathConstructor = obj.pathConstructor;\r\n        };\r\n        makeAutoObservable(this);\r\n    }\r\n    return LinksSettings;\r\n}());\r\nexport { LinksSettings };\r\n//# sourceMappingURL=linksSettings.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { addPoints, multiplyPoint } from '../utils';\r\nvar LinkEndpointState = /** @class */ (function () {\r\n    function LinkEndpointState(rootStore) {\r\n        var _this = this;\r\n        this.position = null;\r\n        this.nodeId = null;\r\n        this.portId = null;\r\n        this.fromJson = function (obj) {\r\n            var _a;\r\n            if ('position' in obj) {\r\n                _this.position = obj.position;\r\n                _this.nodeId = null;\r\n                _this.portId = null;\r\n            }\r\n            else {\r\n                _this.position = null;\r\n                _this.nodeId = obj.nodeId;\r\n                _this.portId = (_a = obj.portId) !== null && _a !== void 0 ? _a : null;\r\n            }\r\n        };\r\n        makeAutoObservable(this);\r\n        this.rootStore = rootStore;\r\n    }\r\n    Object.defineProperty(LinkEndpointState.prototype, \"port\", {\r\n        get: function () {\r\n            if (this.nodeId && this.portId) {\r\n                var node = this.rootStore.nodesStore.nodes[this.nodeId];\r\n                if (node === null || node === void 0 ? void 0 : node.ports) {\r\n                    return node.ports[this.portId];\r\n                }\r\n            }\r\n            return undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LinkEndpointState.prototype, \"point\", {\r\n        get: function () {\r\n            var _a;\r\n            if (this.nodeId) {\r\n                var node = this.rootStore.nodesStore.nodes[this.nodeId];\r\n                var nodeRect = node.ref.getBoundingClientRect(this.rootStore.diagramState.zoom);\r\n                var portRect = void 0;\r\n                if (this.portId) {\r\n                    portRect = node.ports[this.portId].ref.getBoundingClientRect(this.rootStore.diagramState.zoom);\r\n                }\r\n                if (nodeRect && portRect) {\r\n                    var diff = [\r\n                        nodeRect.left - portRect.left,\r\n                        nodeRect.top - portRect.top\r\n                    ];\r\n                    diff = multiplyPoint(diff, -1 / this.rootStore.diagramState.zoom);\r\n                    var result = addPoints(node.offset, diff);\r\n                    result = addPoints(result, [portRect.width / 2, portRect.height / 2]);\r\n                    return result;\r\n                }\r\n                else if (nodeRect) {\r\n                    return [\r\n                        node.offset[0] + (nodeRect.width / 2),\r\n                        node.offset[1] + (nodeRect.height / 2)\r\n                    ];\r\n                }\r\n                else {\r\n                    return node.offset;\r\n                }\r\n            }\r\n            return (_a = this.position) !== null && _a !== void 0 ? _a : [0, 0];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LinkEndpointState.prototype, \"hasOnlyPosition\", {\r\n        get: function () {\r\n            return !!this.position && !this.nodeId;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return LinkEndpointState;\r\n}());\r\nexport { LinkEndpointState };\r\n//# sourceMappingURL=linkEndpointState.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { componentDefaultType } from '../types/common';\r\nimport { v4 } from 'uuid';\r\nimport { LinkEndpointState } from './linkEndpointState';\r\nvar LinkState = /** @class */ (function () {\r\n    function LinkState(rootStore, id) {\r\n        var _this = this;\r\n        if (id === void 0) { id = v4(); }\r\n        this.componentType = componentDefaultType;\r\n        this.segments = [];\r\n        this.extra = null;\r\n        this.fromJson = function (obj) {\r\n            var _a;\r\n            _this.componentType = (_a = obj.componentType) !== null && _a !== void 0 ? _a : componentDefaultType;\r\n            _this.source.fromJson(obj.source);\r\n            _this.target.fromJson(obj.target);\r\n            _this.segments = obj.segments;\r\n            _this.extra = obj.extra;\r\n        };\r\n        this.id = id;\r\n        this.source = new LinkEndpointState(rootStore);\r\n        this.target = new LinkEndpointState(rootStore);\r\n        makeAutoObservable(this);\r\n        this.rootStore = rootStore;\r\n    }\r\n    Object.defineProperty(LinkState.prototype, \"path\", {\r\n        get: function () {\r\n            var _a, _b;\r\n            var linksSettings = this.rootStore.linksSettings;\r\n            return linksSettings.pathConstructor(this.source.point, this.target.point, (_a = this.source.port) === null || _a === void 0 ? void 0 : _a.type, (_b = this.target.port) === null || _b === void 0 ? void 0 : _b.type);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LinkState.prototype, \"componentDefinition\", {\r\n        get: function () {\r\n            var visualComponents = this.rootStore.linksSettings.visualComponents;\r\n            return visualComponents.getComponent(this.componentType);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    LinkState.prototype.setSource = function (source) {\r\n        this.source.fromJson(source);\r\n    };\r\n    LinkState.prototype.setTarget = function (target) {\r\n        this.target.fromJson(target);\r\n    };\r\n    return LinkState;\r\n}());\r\nexport { LinkState };\r\n//# sourceMappingURL=linkState.js.map","import { makeAutoObservable, observable } from 'mobx';\r\nimport { LinkState } from './linkState';\r\nvar LinkCreationState = /** @class */ (function () {\r\n    function LinkCreationState(rootStore) {\r\n        this.link = null;\r\n        this.targetPortCandidate = null;\r\n        makeAutoObservable(this, { link: observable, targetPortCandidate: observable });\r\n        this.rootStore = rootStore;\r\n    }\r\n    LinkCreationState.prototype.startLinking = function (portState) {\r\n        this.link = new LinkState(this.rootStore);\r\n        this.link.setSource({\r\n            nodeId: portState.nodeId,\r\n            portId: portState.id,\r\n        });\r\n        this.link.setTarget({\r\n            position: this.link.source.point,\r\n        });\r\n    };\r\n    LinkCreationState.prototype.setTargetPortCandidate = function (portState) {\r\n        var _a;\r\n        if (((_a = this.link) === null || _a === void 0 ? void 0 : _a.source) && 'portId' in this.link.source) {\r\n            if (this.link.source.nodeId !== portState.nodeId) {\r\n                this.targetPortCandidate = portState;\r\n            }\r\n        }\r\n    };\r\n    LinkCreationState.prototype.resetTargetPortCandidate = function () {\r\n        this.targetPortCandidate = null;\r\n    };\r\n    LinkCreationState.prototype.stopLinking = function () {\r\n        if (this.targetPortCandidate && this.link) {\r\n            this.link.setTarget({\r\n                nodeId: this.targetPortCandidate.nodeId,\r\n                portId: this.targetPortCandidate.id\r\n            });\r\n            this.rootStore.linksStore.addLink(this.link);\r\n        }\r\n        this.targetPortCandidate = null;\r\n        this.link = null;\r\n    };\r\n    return LinkCreationState;\r\n}());\r\nexport { LinkCreationState };\r\n//# sourceMappingURL=linkCreationState.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { v4 } from 'uuid';\r\nimport { LinkCreationState } from './linkCreationState';\r\nimport { LinkState } from './linkState';\r\nvar LinksStore = /** @class */ (function () {\r\n    function LinksStore(rootStore) {\r\n        var _this = this;\r\n        this.links = {};\r\n        this.fromJson = function (newLinks) {\r\n            _this.links = {};\r\n            if (newLinks) {\r\n                newLinks.forEach(function (linkState) {\r\n                    var newLink = new LinkState(_this.rootStore, linkState.id);\r\n                    newLink.fromJson(linkState);\r\n                    _this.links[newLink.id] = newLink;\r\n                });\r\n            }\r\n        };\r\n        this.addLinkFromJson = function (link) {\r\n            var _a;\r\n            var id = (_a = link.id) !== null && _a !== void 0 ? _a : v4();\r\n            if (!_this.links[id]) {\r\n                _this.links[id] = new LinkState(_this.rootStore, id);\r\n            }\r\n            _this.links[id].fromJson(link);\r\n        };\r\n        this.addLink = function (link) {\r\n            _this.links[link.id] = link;\r\n        };\r\n        this.linkCreation = new LinkCreationState(rootStore);\r\n        makeAutoObservable(this);\r\n        this.rootStore = rootStore;\r\n    }\r\n    return LinksStore;\r\n}());\r\nexport { LinksStore };\r\n//# sourceMappingURL=linksStore.js.map","import React from 'react';\r\nimport { useRootStore } from '../hooks/useRootStore';\r\nexport var NodeDefault = function (_a) {\r\n    var entity = _a.entity, settings = _a.settings, draggableRef = _a.draggableRef;\r\n    var portsSettings = useRootStore().portsSettings;\r\n    return (React.createElement(\"div\", { ref: draggableRef, className: 'react_fast_diagram_Node_Default', style: settings === null || settings === void 0 ? void 0 : settings.style },\r\n        React.createElement(\"span\", null, entity.id),\r\n        generatePortsContainer(portsSettings, entity.ports, 'left', 'left'),\r\n        generatePortsContainer(portsSettings, entity.ports, 'top', 'top'),\r\n        generatePortsContainer(portsSettings, entity.ports, 'right', 'right'),\r\n        generatePortsContainer(portsSettings, entity.ports, 'bottom', 'bottom')));\r\n};\r\nexport function generatePortsContainer(portsSettings, ports, portsType, position) {\r\n    var portsToShow = Object.values(ports).filter(function (port) { return port.type === portsType; });\r\n    var portsContainer = portsSettings.portsContainerVisualComponents.getComponent((position === 'left' || position === 'right') ? 'vertical' : 'horizontal');\r\n    return (portsToShow && (React.createElement(\"div\", { style: {\r\n            position: 'absolute',\r\n            left: position === 'left' ? 0 : undefined,\r\n            top: position === 'top' ? 0 : undefined,\r\n            right: position === 'right' ? 0 : undefined,\r\n            bottom: position === 'bottom' ? 0 : undefined,\r\n            height: (position === 'left' || position === 'right') ? '100%' : undefined\r\n        } },\r\n        React.createElement(portsContainer.component, { entity: portsToShow, settings: portsContainer.settings }))));\r\n}\r\nexport function createNodeDefault(settings) {\r\n    return {\r\n        component: NodeDefault,\r\n        settings: settings,\r\n    };\r\n}\r\n// export const NodeDefault = forwardRef<\r\n//   HTMLDivElement,\r\n//   IComponentProps<NodeState, INodeDefaultSettings>\r\n// >(observable(() => {\r\n//# sourceMappingURL=NodeDefault.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { componentDefaultType } from '..';\r\nimport { NodeDefault } from '../components/NodeDefault';\r\nimport { VisualComponents, } from './visualComponents';\r\nvar NodesSettings = /** @class */ (function () {\r\n    function NodesSettings() {\r\n        var _a;\r\n        var _this = this;\r\n        this.visualComponents = new VisualComponents((_a = {},\r\n            _a[componentDefaultType] = NodeDefault,\r\n            _a));\r\n        this.fromJson = function (obj) {\r\n            _this.visualComponents.fromJson(obj);\r\n        };\r\n        makeAutoObservable(this);\r\n    }\r\n    return NodesSettings;\r\n}());\r\nexport { NodesSettings };\r\n//# sourceMappingURL=nodesSettings.js.map","import { makeAutoObservable } from 'mobx';\r\nvar HtmlElementRefState = /** @class */ (function () {\r\n    function HtmlElementRefState(initValue) {\r\n        this.currentInternal = initValue;\r\n        makeAutoObservable(this);\r\n    }\r\n    Object.defineProperty(HtmlElementRefState.prototype, \"current\", {\r\n        get: function () {\r\n            return this.currentInternal;\r\n        },\r\n        set: function (value) {\r\n            this.currentInternal = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    HtmlElementRefState.prototype.getBoundingClientRect = function (currentZoom) {\r\n        var _a;\r\n        var realRect = (_a = this.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\r\n        if (realRect) {\r\n            var rectJson = realRect.toJSON();\r\n            rectJson.width /= currentZoom;\r\n            rectJson.height /= currentZoom;\r\n            return rectJson;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    return HtmlElementRefState;\r\n}());\r\nexport { HtmlElementRefState };\r\n//# sourceMappingURL=htmlElementRefState.js.map","import { componentDefaultType } from '../types/common';\r\nimport { v4 } from 'uuid';\r\nimport { makeAutoObservable } from 'mobx';\r\nimport { HtmlElementRefState } from './htmlElementRefState';\r\nvar PortState = /** @class */ (function () {\r\n    function PortState(id, nodeId) {\r\n        var _this = this;\r\n        if (id === void 0) { id = v4(); }\r\n        if (nodeId === void 0) { nodeId = v4(); }\r\n        this.id = '';\r\n        this.nodeId = '';\r\n        this.label = '';\r\n        this.type = '';\r\n        this.fromJson = function (obj) {\r\n            var _a;\r\n            _this.type = (_a = obj.type) !== null && _a !== void 0 ? _a : componentDefaultType;\r\n            _this.label = obj.label;\r\n        };\r\n        this.id = id;\r\n        this.nodeId = nodeId;\r\n        this.ref = new HtmlElementRefState(null);\r\n        makeAutoObservable(this);\r\n    }\r\n    return PortState;\r\n}());\r\nexport { PortState };\r\n//# sourceMappingURL=portState.js.map","import { componentDefaultType } from '../types/common';\r\nimport { makeAutoObservable } from 'mobx';\r\nimport { PortState } from './portState';\r\nimport { v4 } from 'uuid';\r\nimport { generateTransform } from '../utils';\r\nimport { HtmlElementRefState } from './htmlElementRefState';\r\nvar NodeState = /** @class */ (function () {\r\n    function NodeState(rootStore, id) {\r\n        var _this = this;\r\n        if (id === void 0) { id = v4(); }\r\n        this.id = '';\r\n        this.offset = [0, 0];\r\n        this.ports = {};\r\n        this.componentType = componentDefaultType;\r\n        this.extra = null;\r\n        this.setOffset = function (newOffset) {\r\n            _this.offset = newOffset;\r\n        };\r\n        this.fromJson = function (obj) {\r\n            var _a;\r\n            _this.offset = obj.position;\r\n            _this.componentType = (_a = obj.componentType) !== null && _a !== void 0 ? _a : componentDefaultType;\r\n            _this.extra = obj.extra;\r\n            _this.ports = {};\r\n            if (obj.ports && Object.keys(obj.ports).length > 0) {\r\n                Object.entries(obj.ports).forEach(function (_a) {\r\n                    var portId = _a[0], portObj = _a[1];\r\n                    var portState = new PortState(portId, _this.id);\r\n                    portState.fromJson(portObj);\r\n                    _this.ports[portId] = portState;\r\n                });\r\n            }\r\n        };\r\n        this.id = id;\r\n        this.ref = new HtmlElementRefState(null);\r\n        makeAutoObservable(this);\r\n        this.rootStore = rootStore;\r\n    }\r\n    Object.defineProperty(NodeState.prototype, \"transformString\", {\r\n        get: function () {\r\n            return generateTransform(this.offset);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(NodeState.prototype, \"componentDefinition\", {\r\n        get: function () {\r\n            var visualComponents = this.rootStore.nodesSettings.visualComponents;\r\n            return visualComponents.getComponent(this.componentType);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return NodeState;\r\n}());\r\nexport { NodeState };\r\n//# sourceMappingURL=nodeState.js.map","import { makeAutoObservable } from 'mobx';\r\nimport { NodeState } from './nodeState';\r\nimport { v4 } from 'uuid';\r\nvar NodesStore = /** @class */ (function () {\r\n    function NodesStore(rootStore) {\r\n        var _this = this;\r\n        this.nodes = {};\r\n        this.fromJson = function (newNodes) {\r\n            _this.nodes = {};\r\n            if (newNodes) {\r\n                newNodes.forEach(function (node) {\r\n                    var newNode = new NodeState(_this.rootStore, node.id);\r\n                    newNode.fromJson(node);\r\n                    _this.nodes[newNode.id] = newNode;\r\n                });\r\n            }\r\n        };\r\n        this.addNode = function (node) {\r\n            var _a;\r\n            var id = (_a = node.id) !== null && _a !== void 0 ? _a : v4();\r\n            if (!_this.nodes[id]) {\r\n                _this.nodes[id] = new NodeState(_this.rootStore, id);\r\n            }\r\n            _this.nodes[id].fromJson(node);\r\n        };\r\n        makeAutoObservable(this);\r\n        this.rootStore = rootStore;\r\n    }\r\n    return NodesStore;\r\n}());\r\nexport { NodesStore };\r\n//# sourceMappingURL=nodesStore.js.map","import React from 'react';\r\nimport { usePortUserInteraction } from '../hooks/userInteractions/usePortUserInteraction';\r\nimport { observer } from 'mobx-react-lite';\r\nexport var PortWrapper = observer(function (_a) {\r\n    var port = _a.port;\r\n    var userInteractionElemRef = usePortUserInteraction(port).userInteractionElemRef;\r\n    return (React.createElement(\"div\", { ref: {\r\n            set current(value) {\r\n                userInteractionElemRef.current = value;\r\n                port.ref.current = value;\r\n            },\r\n        }, className: 'react_fast_diagram_PortWrapper' },\r\n        React.createElement(\"div\", { style: {\r\n                width: 10,\r\n                height: 10,\r\n                backgroundColor: 'green',\r\n            } })));\r\n});\r\n//# sourceMappingURL=PortWrapper.js.map","import { useRef } from 'react';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport { useNotifyRef } from '../useNotifyRef';\r\nimport { useRootStore } from '../useRootStore';\r\nimport { useUserAbilityToSelectSwitcher } from './useUserAbilityToSelectSwitcher';\r\nexport var usePortUserInteraction = function (portState, enable) {\r\n    var _a, _b;\r\n    var _c = useRootStore(), linkCreation = _c.linksStore.linkCreation, diagramState = _c.diagramState, nodesStore = _c.nodesStore;\r\n    // Should trigger rendering on change, otherwise useUserSelectSwitcher will not be invoked\r\n    var activeRef = useNotifyRef(false);\r\n    var userInteractionElemRef = useRef(null);\r\n    useGesture({\r\n        onDrag: function (_a) {\r\n            var pinching = _a.pinching, delta = _a.delta;\r\n            if (!activeRef.current || pinching || !linkCreation.link) {\r\n                return;\r\n            }\r\n            var parentScale = diagramState.zoom;\r\n            linkCreation.link.setTarget({\r\n                position: [\r\n                    linkCreation.link.target.point[0] + delta[0] / parentScale,\r\n                    linkCreation.link.target.point[1] + delta[1] / parentScale,\r\n                ]\r\n            });\r\n        },\r\n        onDragStart: function (_a) {\r\n            var _b;\r\n            var event = _a.event;\r\n            var nodeRect = nodesStore.nodes[portState.nodeId].ref.getBoundingClientRect(diagramState.zoom);\r\n            var portHtmlElement = event.target;\r\n            var portRect = (_b = event.target) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\r\n            portHtmlElement.releasePointerCapture(event.pointerId);\r\n            if (nodeRect && portRect) {\r\n                activeRef.current = true;\r\n                linkCreation.startLinking(portState);\r\n            }\r\n        },\r\n        onDragEnd: function () {\r\n            activeRef.current = false;\r\n            linkCreation.stopLinking();\r\n        },\r\n        onPointerEnter: function () {\r\n            linkCreation.setTargetPortCandidate(portState);\r\n        }\r\n    }, {\r\n        domTarget: userInteractionElemRef,\r\n        eventOptions: { passive: false },\r\n        enabled: enable,\r\n    });\r\n    useUserAbilityToSelectSwitcher(activeRef.current, (_b = (_a = userInteractionElemRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.body);\r\n    return {\r\n        active: activeRef.current,\r\n        userInteractionElemRef: userInteractionElemRef,\r\n    };\r\n};\r\n//# sourceMappingURL=usePortUserInteraction.js.map","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from 'react';\r\nimport { PortWrapper } from './PortWrapper';\r\nexport var PortsContainerDefault = function (_a) {\r\n    var entity = _a.entity, settings = _a.settings;\r\n    var finalSettings = __assign(__assign({}, portsContainerDefaultSettings), settings);\r\n    var className = 'react_fast_diagram_PortContainer_Default ';\r\n    if (finalSettings.direction === 'horizontal') {\r\n        className += 'react_fast_diagram_PortContainer_Default_Horizontal';\r\n    }\r\n    else {\r\n        className += 'react_fast_diagram_PortContainer_Default_Vertical';\r\n    }\r\n    return (React.createElement(\"div\", { className: className, style: {\r\n            //@ts-ignore\r\n            '--flex-gap': finalSettings.gapBetweenPorts\r\n        } }, Object.values(entity).map(function (port) { return (React.createElement(PortWrapper, { key: port.id, port: port })); })));\r\n};\r\nexport function createPortsContainerDefault(settings) {\r\n    return {\r\n        component: PortsContainerDefault,\r\n        settings: __assign(__assign({}, portsContainerDefaultSettings), settings)\r\n    };\r\n}\r\nvar portsContainerDefaultSettings = {\r\n    direction: 'horizontal',\r\n    gapBetweenPorts: 8,\r\n};\r\n//# sourceMappingURL=PortsContainerDefault.js.map","import { VisualComponents, } from './visualComponents';\r\nimport { makeAutoObservable } from 'mobx';\r\nimport { createPortsContainerDefault } from '../components/PortsContainerDefault';\r\nvar PortsSettings = /** @class */ (function () {\r\n    function PortsSettings() {\r\n        var _this = this;\r\n        this.portsContainerVisualComponents = new VisualComponents({\r\n            horizontal: createPortsContainerDefault({ direction: 'horizontal' }),\r\n            vertical: createPortsContainerDefault({ direction: 'vertical' }),\r\n        });\r\n        this.fromJson = function (obj) {\r\n            _this.portsContainerVisualComponents.fromJson(obj);\r\n        };\r\n        makeAutoObservable(this);\r\n    }\r\n    return PortsSettings;\r\n}());\r\nexport { PortsSettings };\r\n//# sourceMappingURL=portsSettings.js.map","import { DiagramApi } from './diagramApi';\r\nimport { DiagramsSettings } from './diagramsSettings';\r\nimport { DiagramState } from './diagramState';\r\nimport { LinksSettings } from './linksSettings';\r\nimport { LinksStore } from './linksStore';\r\nimport { NodesSettings } from './nodesSettings';\r\nimport { NodesStore } from './nodesStore';\r\nimport { PortsSettings } from './portsSettings';\r\nvar RootStore = /** @class */ (function () {\r\n    function RootStore() {\r\n        this.diagramState = new DiagramState(this);\r\n        this.nodesStore = new NodesStore(this);\r\n        this.linksStore = new LinksStore(this);\r\n        this.diagramSettings = new DiagramsSettings();\r\n        this.nodesSettings = new NodesSettings();\r\n        this.linksSettings = new LinksSettings();\r\n        this.portsSettings = new PortsSettings();\r\n        this.diagramApi = new DiagramApi(this);\r\n    }\r\n    return RootStore;\r\n}());\r\nexport { RootStore };\r\n//# sourceMappingURL=rootStore.js.map","import React, { useEffect, useMemo } from 'react';\r\nimport { InnerDiagram } from './DiagramInner';\r\nimport '../Diagram.css';\r\nimport { RootStore } from '../states/rootStore';\r\nexport var RootStoreContext = React.createContext(null);\r\nexport var Diagram = function (props) {\r\n    var rootStore = useMemo(function () {\r\n        var _a, _b, _c, _d;\r\n        var store = new RootStore();\r\n        store.diagramApi.reinitState((_b = (_a = props.initState) === null || _a === void 0 ? void 0 : _a.nodes) !== null && _b !== void 0 ? _b : [], (_d = (_c = props.initState) === null || _c === void 0 ? void 0 : _c.links) !== null && _d !== void 0 ? _d : []);\r\n        props.settings && store.diagramApi.reinitSettings(props.settings);\r\n        return store;\r\n    }, []);\r\n    useEffect(function () {\r\n        if (props.apiRef) {\r\n            props.apiRef.current = rootStore.diagramApi;\r\n        }\r\n    }, [rootStore, props.apiRef]);\r\n    return (React.createElement(RootStoreContext.Provider, { value: rootStore },\r\n        React.createElement(InnerDiagram, null)));\r\n};\r\nDiagram.displayName = 'Diagram';\r\n//# sourceMappingURL=Diagram.js.map","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Tune } from '@material-ui/icons';\r\nimport Card from '@material-ui/core/Card';\r\nimport { Box, Button, TextField, Typography } from '@material-ui/core';\r\nimport { IDiagramInitState, ILinkState, INodeState } from '@react-easy-diagram/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    margin: '-8px 0',\r\n    '& > *': {\r\n      margin: '8px 0'\r\n    }\r\n  },\r\n  visibilityBtn: {\r\n    borderRadius: '25px',\r\n    minWidth: '24px',\r\n    padding: '8px 8px',\r\n    backgroundColor: 'white',\r\n  },\r\n  header: {\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    margin: '0 -14px',\r\n    '& > *': {\r\n      margin: '0 14px'\r\n    }\r\n  },\r\n}));\r\n\r\nconst generateLargeDiagram = (colNum: number, rowNum: number): IDiagramInitState => {\r\n  const nodes : INodeState[] = [];\r\n  const links : ILinkState[] = [];\r\n  const getNodeId = (i: number,j: number) => `node_${i}_${j}`;\r\n\r\n  for (let i = 0; i < colNum; i++) {\r\n    for (let j = 0; j < rowNum; j++) {\r\n      nodes.push({\r\n        id: getNodeId(i,j),\r\n        position: [i * 120, j * 120 ],\r\n        ports: {\r\n          left: {type: 'left'},\r\n          top: {type: 'top'},\r\n          right: {type: 'right'},\r\n          bottom: {type: 'bottom'},\r\n        }\r\n      });\r\n      if (i - 1 >= 0) {\r\n        links.push({\r\n          source: {\r\n            nodeId: getNodeId(i - 1,j),\r\n            portId: 'right'\r\n          },\r\n          target: {\r\n            nodeId: getNodeId(i,j),\r\n            portId: 'left'\r\n          }\r\n        });\r\n      }\r\n      if (j - 1 >= 0) {\r\n        links.push({\r\n          source: {\r\n            nodeId: getNodeId(i,j - 1),\r\n            portId: 'bottom'\r\n          },\r\n          target: {\r\n            nodeId: getNodeId(i,j),\r\n            portId: 'top'\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return {nodes,links};\r\n};\r\n\r\nexport interface ControlPanelProps{\r\n  reinitState?(nodes: INodeState[], links: ILinkState[]): void;\r\n}\r\n\r\nexport const ControlPanel = (props: ControlPanelProps) => {\r\n  const classes = useStyles();\r\n\r\n  const [row, setRow] = useState(10);\r\n  const [col, setCol] = useState(10);\r\n\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  const onFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (props.reinitState) {\r\n      const newState = generateLargeDiagram(row, col);\r\n      props.reinitState(newState.nodes, newState.links);\r\n    }\r\n  };\r\n\r\n  if (visible) {\r\n    return (\r\n      <Box padding={3} clone>\r\n        <Card>\r\n          <div className={classes.header}>\r\n            <Button\r\n              className={classes.visibilityBtn}\r\n              variant='outlined'\r\n              aria-label='control-panel'\r\n              onClick={() => setVisible(false)}\r\n            >\r\n              <Tune />\r\n            </Button>\r\n            <Typography variant='h5'>Control Panel</Typography>\r\n          </div>\r\n          <form\r\n            className={classes.form}\r\n            noValidate\r\n            autoComplete='off'\r\n            onSubmit={onFormSubmit}\r\n          >\r\n            <TextField\r\n              id='rows'\r\n              value={row}\r\n              type='number'\r\n              label='Rows'\r\n              variant='outlined'\r\n              onChange={(e) => setRow(parseInt(e.target.value))}\r\n            />\r\n            <TextField\r\n              id='columns'\r\n              value={col}\r\n              type='number'\r\n              label='Columns'\r\n              variant='outlined'\r\n              onChange={(e) => setCol(parseInt(e.target.value))}\r\n            />\r\n            <Button variant='contained' type='submit'>\r\n              Generate new Diagram\r\n            </Button>\r\n          </form>\r\n        </Card>\r\n      </Box>\r\n    );\r\n  } else {\r\n    return (\r\n      <Button\r\n        variant='outlined'\r\n        className={classes.visibilityBtn}\r\n        aria-label='control-panel'\r\n        onClick={() => setVisible(true)}\r\n      >\r\n        <Tune />\r\n      </Button>\r\n    );\r\n  }\r\n};\r\n","import React from 'react';\r\nimport './App.css';\r\nimport { createCurvedLinkPathConstructor, createLinkDefault, IDiagramInitState, useDiagram } from '@react-easy-diagram/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { ControlPanel } from './ControlPanel';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  diagram: {\r\n    height: '100vh',\r\n    width: '100vw',\r\n  },\r\n  controlPanel: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    left: '20px',\r\n  },\r\n}));\r\n\r\nexport const App = () => {\r\n  const classes = useStyles();\r\n  const { Diagram, apiRef } = useDiagram(initState, {\r\n    links: {\r\n      components: {\r\n        default: createLinkDefault(),\r\n        attention: createLinkDefault({color: 'red'})\r\n      },\r\n      pathConstructor: createCurvedLinkPathConstructor()\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Box className={classes.diagram}>\r\n      <Diagram />\r\n      <Box className={classes.controlPanel}>\r\n        <ControlPanel reinitState={apiRef.current?.reinitState} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst initState: IDiagramInitState = {\r\n  nodes: [\r\n    {\r\n      id: 'Node 1',\r\n      position: [300, 300],\r\n      ports: {\r\n        'output_1': {type: 'bottom'}, \r\n      }\r\n    },\r\n    {\r\n      id: 'Node 2',\r\n      position: [520, 400],\r\n      ports: {\r\n        'input_1': {type: 'top'}, \r\n        'input_2': {type: 'top'}, \r\n        'output_1': {type: 'right'}, \r\n        'output_2': {type: 'right'}, \r\n        'output_3': {type: 'right'}, \r\n      }\r\n    },\r\n    {\r\n      id: 'Node 3',\r\n      position: [520, 200],\r\n      ports: {\r\n        'input_1': {type: 'top'}, \r\n        'output_1': {type: 'bottom'}, \r\n        'output_2': {type: 'bottom'}, \r\n      }\r\n    },\r\n  ],\r\n  links: [\r\n    {\r\n      source: {\r\n        nodeId: 'Node 2',\r\n      },\r\n      target: {\r\n        nodeId: 'Node 1',\r\n      },\r\n      componentType: 'attention',\r\n    },\r\n  ],\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { Diagram } from '../components/Diagram';\r\nimport { useNotifyRef } from './useNotifyRef';\r\nexport var useDiagram = function (initState, settings) {\r\n    var apiRef = useNotifyRef(null);\r\n    var obj = useMemo(function () { return ({\r\n        Diagram: function () { return (React.createElement(Diagram, { apiRef: apiRef, initState: initState, settings: settings })); },\r\n        apiRef: apiRef,\r\n    }); }, []);\r\n    return obj;\r\n};\r\n//# sourceMappingURL=useDiagram.js.map","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}